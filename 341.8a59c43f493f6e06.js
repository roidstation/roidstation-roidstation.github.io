"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[341],{30341:(y,p,s)=>{s.r(p),s.d(p,{CreateInscriptionPage:()=>g});var h=s(15861),m=s(96814),r=s(60095),o=s(93800),x=s(20766);var d,u=s(20553),_=s(241),e=s(19212),v=s(58344),I=s(98065);function Z(i,n){if(1&i&&e._UZ(0,"img",30),2&i){const t=e.oxw(2);e.Q6J("src",t.createInscriptionForm.value.basic.contentUpload,e.LSH)}}function C(i,n){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.originalFilename)}}function P(i,n){1&i&&(e.TgZ(0,"div",31),e._uU(1," You must add content to inscribe "),e.qZA())}function z(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",23)(1,"div",24),e.YNc(2,Z,1,1,"img",25)(3,C,2,1,"div",18),e.TgZ(4,"div",26)(5,"label",27),e._uU(6,"Change file"),e.qZA(),e.TgZ(7,"input",28),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onInscriptionFileSelected(a))}),e.qZA()(),e.YNc(8,P,2,0,"div",29),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.renderImagePreview),e.xp6(1),e.Q6J("ngIf",t.originalFilename),e.xp6(5),e.Q6J("ngIf",t.contentRequired)}}function T(i,n){1&i&&(e.TgZ(0,"div",31),e._uU(1," You must add content to inscribe "),e.qZA())}function w(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",32)(1,"p"),e._uU(2,"Content"),e.qZA(),e.TgZ(3,"p",33),e._uU(4,"Max file size"),e._UZ(5,"br"),e._uU(6),e.qZA(),e.TgZ(7,"div",26)(8,"label",34),e._uU(9,"Select file"),e.qZA(),e.TgZ(10,"input",35),e.NdJ("change",function(a){e.CHM(t);const l=e.oxw();return e.KtG(l.onInscriptionFileSelected(a))}),e.qZA()(),e.YNc(11,T,2,0,"div",29),e.qZA()}if(2&i){const t=e.oxw();e.xp6(6),e.hij("",t.maxFileSize/1e3,"kb"),e.xp6(5),e.Q6J("ngIf",t.contentRequired)}}function U(i,n){if(1&i&&(e.TgZ(0,"ion-row")(1,"ion-col",36),e._uU(2," \xa0 "),e.qZA(),e.TgZ(3,"ion-col",37)(4,"div",38),e._uU(5),e.qZA()()()),2&i){const t=e.oxw();e.xp6(5),e.hij(" The content you are trying to inscribe exceeds the maximum file size of ",t.maxFileSize/1e3,"kb ")}}class g{constructor(n,t,c,a,l){this.builder=n,this.protocolService=t,this.walletService=c,this.modalCtrl=a,this.alertController=l,this.originalFilename="",this.inscriptionFileSize=0,this.maxFileSize=u.N.limits.maxFileSize,this.renderImagePreview=!1,this.contentRequired=!1,this.createInscriptionForm=this.builder.group({basic:this.builder.group({name:["",[r.kI.required,r.kI.minLength(3),r.kI.maxLength(32)]],description:"",contentUpload:[null,r.kI.required]})})}ngOnInit(){}ionViewDidLeave(){this.createInscriptionForm.patchValue({basic:{name:"",description:"",contentUpload:null}})}submit(){this.contentRequired=!1,this.createInscriptionForm.valid?this.createInscription():(this.createInscriptionForm.markAllAsTouched(),null===this.createInscriptionForm.value.basic.contentUpload&&(this.contentRequired=!0))}createInscription(){var n=this;return(0,h.Z)(function*(){let t=n.createInscriptionForm.value.basic.contentUpload;const c=t.split(";")[0].split(":")[1];t=t.split(",")[1];try{const a={parent:{type:"/cosmos.bank.Account",identifier:(yield n.walletService.getAccount()).address},metadata:{name:n.createInscriptionForm.value.basic.name.trim(),description:n.createInscriptionForm.value.basic.description.trim(),mime:c}},l=btoa(JSON.stringify(a)),f=yield(i=l+t,crypto.subtle.digest("SHA-256",(new TextEncoder).encode(i)).then(n=>{let t=[],c=new DataView(n);for(let a=0;a<c.byteLength;a+=4)t.push(("00000000"+c.getUint32(a).toString(16)).slice(-8));return t.join("")})),A=new Map([["h",f]]),F=n.protocolService.buildURN(u.N.chain.chainId,"inscribe",A);(yield n.modalCtrl.create({keyboardClose:!0,backdropDismiss:!1,component:x.l,componentProps:{urn:F,metadata:l,data:t,routerLink:"/app/inscription",resultCTA:"View inscription"}})).present()}catch{(yield n.modalCtrl.create({keyboardClose:!0,backdropDismiss:!0,component:_.f,cssClass:"wallet-required-modal"})).present()}var i})()}onInscriptionFileSelected(n){this.contentRequired=!1;const t=n.target.files[0];if(t){const c=new FileReader;c.onload=a=>{const l=a.target.result;this.renderImagePreview=!1,l.split(";")[0].split(":")[1].startsWith("image/")&&(this.renderImagePreview=!0),this.originalFilename=t.name,this.inscriptionFileSize=t.size,this.createInscriptionForm.patchValue({basic:{contentUpload:l}}),this.contentRequired=!1},c.readAsDataURL(t)}}}(d=g).\u0275fac=function(n){return new(n||d)(e.Y36(r.qu),e.Y36(v.C),e.Y36(I.X),e.Y36(o.IN),e.Y36(o.Br))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-create-inscription"]],standalone:!0,features:[e.jDz],decls:47,vars:9,consts:[["fullscreen","true"],["size","12","offset","0","size-md","12","offset-md","0","size-md","10","offset-md","1","size-xl","8","offset-xl","2"],[1,"no-shadow"],["slot","start"],["size","12","offset","0","size-md","12","offset-md","0","size-md","10","offset-md","1","size-xl","8","offset-xl","2",1,"main-content"],[1,"aligned"],[1,"note"],["href","https://medium.com/@delphilabs/introducing-asteroid-protocol-an-open-source-framework-for-inscriptions-and-tokens-on-cosmos-hub-03df146d48b1","target","_blank"],[1,"form",3,"formGroup","ngSubmit"],["size-xl","5","size-lg","5","size-xs","12"],["class","uploaded text-center",4,"ngIf"],["class","uploader text-center",4,"ngIf"],["size-xl","6","size-lg","6","size-sm","8","size-xs","12"],["formGroupName","basic",1,"section","mt-3","mb-3"],["formGroupName","basic",1,"form-group"],[1,"mt-2","ps-3"],["label","Name","fill","outline","labelPlacement","stacked","placeholder","Name your inscription","formControlName","name","errorText","Please enter a name",3,"counter","minlength","maxlength"],["fill","outline","label","Description","labelPlacement","stacked","placeholder","Describe you inscription","rows","4","formControlName","description",1,"no-border"],[4,"ngIf"],[1,"section"],["color","primary","fill","solid","type","submit",3,"disabled"],["slot","start","name","checkmark"],[2,"height","100px"],[1,"uploaded","text-center"],[1,"uploader","no-style","text-center"],["class","rounded",3,"src",4,"ngIf"],[1,"upload"],["for","inpout_file_inscription_change"],["id","inpout_file_inscription_change","type","file",3,"change"],["class","info text-center color-danger",4,"ngIf"],[1,"rounded",3,"src"],[1,"info","text-center","color-danger"],[1,"uploader","text-center"],[1,"info"],["for","input_file_inscription_select"],["id","input_file_inscription_select","type","file",3,"change"],["size-xl","3","size-lg","5","size-xs","12"],["size-xl","9","size-lg","8","size-sm","8","size-xs","12"],[1,"section","color-orange"]],template:function(n,t){1&n&&(e.TgZ(0,"ion-content",0)(1,"ion-grid")(2,"ion-row")(3,"ion-col",1)(4,"ion-header",2)(5,"ion-toolbar")(6,"ion-buttons",3),e._UZ(7,"ion-menu-button"),e.qZA(),e.TgZ(8,"ion-title"),e._uU(9," New inscription "),e.qZA()()()()(),e.TgZ(10,"ion-row")(11,"ion-col",4)(12,"div",5)(13,"p",6),e._uU(14),e.qZA(),e.TgZ(15,"p",6),e._uU(16," Learn more in the "),e.TgZ(17,"a",7),e._uU(18,"inscription metaprotocol"),e.qZA(),e._uU(19," documentation "),e.qZA(),e.TgZ(20,"form",8),e.NdJ("ngSubmit",function(){return t.submit()}),e.TgZ(21,"ion-grid")(22,"ion-row")(23,"ion-col",9),e.YNc(24,z,9,3,"div",10)(25,w,12,2,"div",11),e.qZA(),e.TgZ(26,"ion-col",12)(27,"div",13)(28,"h2"),e._uU(29,"Inscription information"),e.qZA(),e.TgZ(30,"p",6),e._uU(31,"Add detail to your inscription"),e.qZA()(),e.TgZ(32,"div",14)(33,"div",15),e._UZ(34,"ion-input",16),e.qZA(),e.TgZ(35,"div",15),e._UZ(36,"ion-textarea",17),e.qZA()()()(),e.YNc(37,U,6,1,"ion-row",18),e.TgZ(38,"ion-row")(39,"ion-col",9),e._uU(40," \xa0 "),e.qZA(),e.TgZ(41,"ion-col",12)(42,"div",19)(43,"ion-button",20),e._UZ(44,"ion-icon",21),e._uU(45," Inscribe "),e.qZA()()()()()()(),e._UZ(46,"div",22),e.qZA()()()()),2&n&&(e.xp6(14),e.hij(" Inscriptions allow you to permanently write arbitrary data to the blockchain. The maximum size of an inscription is currently ",t.maxFileSize/1e3,"kb. "),e.xp6(6),e.Q6J("formGroup",t.createInscriptionForm),e.xp6(4),e.Q6J("ngIf",t.createInscriptionForm.value.basic.contentUpload),e.xp6(1),e.Q6J("ngIf",!t.createInscriptionForm.value.basic.contentUpload),e.xp6(9),e.Q6J("counter",!0)("minlength",3)("maxlength",32),e.xp6(3),e.Q6J("ngIf",t.inscriptionFileSize>t.maxFileSize),e.xp6(6),e.Q6J("disabled",t.inscriptionFileSize>t.maxFileSize))},dependencies:[o.Pc,o.YG,o.Sm,o.wI,o.W2,o.jY,o.Gu,o.gu,o.pK,o.fG,o.Nd,o.g2,o.wd,o.sr,o.j9,m.ez,m.O5,r.UX,r._Y,r.JJ,r.JL,r.wO,r.nD,r.sg,r.u,r.x0],styles:["[_nghost-%COMP%]{--ion-color-step-300: transparent !important}.mw-400[_ngcontent-%COMP%]{max-width:400px}.uploader[_ngcontent-%COMP%]{padding:35px;background:rgba(255,255,255,.05);border:1px dashed rgba(255,255,255,.14);border-radius:30px;margin-bottom:25px}.uploader.no-style[_ngcontent-%COMP%]{padding:0;background:none;border:none;border-radius:0;margin-bottom:0}.uploader[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer;outline:0;-webkit-user-select:none;user-select:none;color:var(--color-teal);font-size:13px;font-weight:600;display:inline-block;height:38px;line-height:32px;padding:0 30px;border:1px solid var(--color-teal);border-top-color:var(--color-teal);border-right-color:var(--color-teal);border-bottom-color:var(--color-teal);border-left-color:var(--color-teal);border-radius:30px;transition:all .3s ease-out 0s}.uploader[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.uploader[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{font-size:12px;color:#fff;padding:0;margin:5px;text-align:left}.uploader[_ngcontent-%COMP%]   .upload[_ngcontent-%COMP%]{margin-top:20px}.section[_ngcontent-%COMP%]{padding-left:15px;font-size:14px}.section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:22px}.section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:18px}ion-datetime-button[_ngcontent-%COMP%]{--ion-text-color: var(--color-teal) !important}.ion-datetime-button-overlay[_ngcontent-%COMP%]   ion-datetime.datetime-grid[_ngcontent-%COMP%]{background:#232f3d}[_nghost-%COMP%]   .datetime-time[_ngcontent-%COMP%]{color:#ff0!important}button[part=wheel-item][_ngcontent-%COMP%]{color:#ff0!important}ion-datetime[_ngcontent-%COMP%]{--background: rgb(35, 47, 61);--background-rgb: 35, 47, 61;--wheel-highlight-background: rgb(35, 47, 61);--wheel-fade-background-rgb: 35, 47, 61}"]})}}]);