"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3287],{33287:(S,m,i)=>{i.r(m),i.d(m,{MintPage:()=>k});var h=i(15861),d=i(96814),x=i(14391),c=i(93800),M=i(16321),T=i(74825);var l,C=i(27921),Z=i(37398),f=i(20553),y=i(24465),b=i(81360),w=i(54931),O=i(20766),A=i(241),t=i(19212),L=i(41767),I=i(98065),v=i(6593);function U(e,n){1&e&&(t.TgZ(0,"div",2),t._UZ(1,"ion-progress-bar",3),t.TgZ(2,"p"),t._uU(3," Loading token... "),t.qZA()())}function z(e,n){if(1&e&&t._UZ(0,"img",23),2&e){const o=t.oxw(2);t.Q6J("src",o.token.content_path,t.LSH)}}function D(e,n){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.TgZ(2,"span"),t._uU(3,"CFT-20 Token"),t.qZA()()),2&e){const o=t.oxw(2);t.xp6(1),t.hij(" ",o.token.ticker," ")}}function $(e,n){if(1&e&&(t.TgZ(0,"div",24),t._uU(1),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.hij(" $",o.token.ticker," ")}}function J(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"div",25)(1,"ion-button",26),t.NdJ("click",function(){t.CHM(o);const s=t.oxw(2);return t.KtG(s.mint())}),t._uU(2,"MINT NOW"),t.qZA()()}}function N(e,n){if(1&e&&(t.TgZ(0,"div",25)(1,"ion-text",27),t._uU(2),t.qZA()()),2&e){const o=t.oxw(2);t.xp6(2),t.hij("All $",o.token.ticker," tokens have been minted")}}function Y(e,n){if(1&e&&(t.TgZ(0,"div",28)(1,"div",12),t._uU(2," Minting starts in "),t.qZA(),t.TgZ(3,"div",29),t._uU(4),t.qZA()()),2&e){const o=t.oxw(2);t.xp6(4),t.hij(" ",o.countdown," ")}}function q(e,n){if(1&e&&(t.TgZ(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7),t.YNc(4,z,1,1,"img",8)(5,D,4,1,"div",9),t.qZA()(),t.TgZ(6,"div",10),t.YNc(7,$,2,1,"div",11),t.TgZ(8,"div",12),t._uU(9),t.qZA(),t.TgZ(10,"ion-grid")(11,"ion-row",13)(12,"ion-col",14)(13,"div",15)(14,"h4"),t._uU(15,"Tokenomics"),t.qZA()()(),t.TgZ(16,"ion-col",16)(17,"div",15)(18,"span",17),t._uU(19,"Max supply"),t.qZA(),t.TgZ(20,"span",18),t._uU(21),t.ALo(22,"humanSupply"),t.ALo(23,"tokenDecimals"),t.qZA()()(),t.TgZ(24,"ion-col",16)(25,"div",15)(26,"span",17),t._uU(27,"Circulating"),t.qZA(),t.TgZ(28,"span",18),t._uU(29),t.ALo(30,"humanSupply"),t.ALo(31,"tokenDecimals"),t.ALo(32,"number"),t.qZA()()(),t.TgZ(33,"ion-col",16)(34,"div",15)(35,"span",17),t._uU(36,"Limit per mint"),t.qZA(),t.TgZ(37,"span",18),t._uU(38),t.ALo(39,"tokenDecimals"),t.qZA()()(),t.TgZ(40,"ion-col",16)(41,"div",15)(42,"span",17),t._uU(43),t.qZA(),t.TgZ(44,"span",18),t._uU(45),t.ALo(46,"date"),t.ALo(47,"date"),t.qZA()()()()(),t.YNc(48,J,3,0,"div",19)(49,N,3,1,"div",19)(50,Y,5,1,"div",20),t.qZA()(),t.TgZ(51,"div",21),t._uU(52," powered by "),t.TgZ(53,"a",22),t._uU(54,"asteroids"),t.qZA()()()),2&e){const o=t.oxw();t.xp6(4),t.Q6J("ngIf",o.token.content_path),t.xp6(1),t.Q6J("ngIf",!o.token.content_path),t.xp6(2),t.Q6J("ngIf",o.token.content_path),t.xp6(2),t.hij(" ",o.token.name," "),t.xp6(12),t.Oqu(t.lcZ(22,14,t.xi3(23,16,o.token.max_supply,o.token.decimals))),t.xp6(8),t.AsE("",t.lcZ(30,19,t.xi3(31,21,o.token.circulating_supply,o.token.decimals))," (",t.xi3(32,24,o.token.circulating_supply/o.token.max_supply*100,"1.2-2"),"%)"),t.xp6(9),t.Oqu(t.xi3(39,27,o.token.per_mint_limit,o.token.decimals)),t.xp6(5),t.Oqu(o.tokenIsLaunched?"Launched at":"Launching"),t.xp6(2),t.AsE("",t.xi3(46,30,o.tokenLaunchDate,"longDate")," ",t.xi3(47,33,o.tokenLaunchDate,"shortTime"),""),t.xp6(3),t.Q6J("ngIf",o.tokenIsLaunched&&o.token.circulating_supply<o.token.max_supply),t.xp6(1),t.Q6J("ngIf",o.tokenIsLaunched&&o.token.circulating_supply>=o.token.max_supply),t.xp6(1),t.Q6J("ngIf",!o.tokenIsLaunched)}}class k{constructor(n,o,r,s,a,p){this.activatedRoute=n,this.protocolService=o,this.modalCtrl=r,this.walletService=s,this.titleService=a,this.meta=p,this.isLoading=!1,this.tokenIsLaunched=!1,this.countdown="",this.tokenLaunchDate=new Date}ngOnInit(){var n=this;return(0,h.Z)(function*(){n.isLoading=!0;const r=yield(0,w.qo)(f.N.api.endpoint)("query")({token:[{where:{ticker:{_eq:n.activatedRoute.snapshot.params.ticker.toUpperCase()}}},{id:!0,height:!0,transaction:{hash:!0},creator:!0,current_owner:!0,name:!0,ticker:!0,decimals:!0,max_supply:!0,per_mint_limit:!0,launch_timestamp:!0,content_path:!0,content_size_bytes:!0,date_created:!0,circulating_supply:!0}]});n.token=r.token[0];const{name:s,ticker:a,content_path:p,id:g,transaction:_}=n.token,u=`${a} | ${s} | on Asteroid Protocol`;n.titleService.setTitle(u),n.meta.updateTag({property:"og:url",content:`https://asteroidprotocol.io/app/inscription/${_.hash}`}),n.meta.updateTag({property:"og:title",content:u}),n.meta.updateTag({property:"og:image",content:p}),n.meta.updateTag({property:"og:description",content:`Mint ${a} | CFT-20 Token #${g} on Asteroid Protocol`}),n.meta.updateTag({name:"description",content:`Mint ${a} | CFT-20 Token #${g} on Asteroid Protocol`}),n.meta.updateTag({property:"twitter:url",content:`https://asteroidprotocol.io/app/inscription/${_.hash}`}),n.meta.updateTag({property:"twitter:title",content:u}),n.meta.updateTag({property:"twitter:image",content:p}),n.meta.updateTag({property:"twitter:description",content:`Mint ${a} | CFT-20 Token #${g} on Asteroid Protocol`}),n.meta.updateTag({property:"twitter:card",content:"summary"}),n.tokenLaunchDate=new Date(1e3*n.token.launch_timestamp),n.tokenLaunchDate.getTime()<Date.now()?n.tokenIsLaunched=!0:n.startCountdown(),n.isLoading=!1})()}mint(){var n=this;return(0,h.Z)(function*(){if(!n.walletService.hasWallet())return void(yield n.modalCtrl.create({keyboardClose:!0,backdropDismiss:!0,component:A.f,cssClass:"wallet-required-modal"})).present();const o=new Map([["tic",n.token.ticker],["amt",n.token.per_mint_limit]]),r=n.protocolService.buildURN(f.N.chain.chainId,"mint",o);(yield n.modalCtrl.create({keyboardClose:!0,backdropDismiss:!1,component:O.l,componentProps:{urn:r,metadata:null,data:null,routerLink:["/app/manage/token",n.token.transaction.hash],resultCTA:"View transaction",metaprotocol:"cft20",metaprotocolAction:"mint"}})).present()})()}startCountdown(){(function P(e=0,n=M.z){return e<0&&(e=0),(0,T.H)(e,e,n)})(1e3).pipe((0,C.O)(0),(0,Z.U)(()=>{const n=new Date,o=this.tokenLaunchDate.getTime()-n.getTime();if(o<0)return"00:00:00:00";const r=Math.floor(o/864e5),s=Math.floor(o%864e5/36e5),a=Math.floor(o%36e5/6e4),p=Math.floor(o%6e4/1e3);return 0===r&&0===s&&0===a&&0===p&&(this.tokenIsLaunched=!0),`${r}d ${s}h ${a}m ${p}s`})).subscribe(n=>this.countdown=n)}}(l=k).\u0275fac=function(n){return new(n||l)(t.Y36(x.gz),t.Y36(L._),t.Y36(c.IN),t.Y36(I.X),t.Y36(v.Dx),t.Y36(v.h_))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-mint"]],standalone:!0,features:[t.jDz],decls:3,vars:2,consts:[["class","loading",4,"ngIf"],["class","cover",4,"ngIf"],[1,"loading"],["type","indeterminate"],[1,"cover"],[1,"mint-container","mx-auto"],[1,"logo"],[1,"inner"],[3,"src",4,"ngIf"],[4,"ngIf"],[1,"content"],["class","text-center",4,"ngIf"],[1,"title"],[1,"break","pb-3"],["size","12"],[1,"meta"],["size","6"],[1,"label"],[1,"value"],["class","cta text-center m-5",4,"ngIf"],["class","countdown",4,"ngIf"],[1,"credit-container","mx-auto"],["href","/","target","_blank"],[3,"src"],[1,"text-center"],[1,"cta","text-center","m-5"],["color","warning",3,"click"],["color","warning"],[1,"countdown"],[1,"counter"]],template:function(n,o){1&n&&(t.TgZ(0,"ion-content"),t.YNc(1,U,4,0,"div",0)(2,q,55,36,"div",1),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngIf",o.isLoading),t.xp6(1),t.Q6J("ngIf",!o.isLoading))},dependencies:[c.Pc,c.YG,c.wI,c.W2,c.jY,c.X7,c.Nd,c.yW,x.Bz,d.ez,d.O5,d.JJ,d.uU,y.S,b.u],styles:["ion-content[_ngcontent-%COMP%]{--ion-background-color: rgba(0, 0, 0, .5);background-image:url(meteor-background.2ccfb5f888a49c12.jpg);background-repeat:no-repeat;background-size:cover;background-position:center center}@supports (background-image: url(../../assets/background/meteor-background.webp)){ion-content[_ngcontent-%COMP%]{background-image:url(meteor-background.1a8de342f71ba51f.webp)}}.cover[_ngcontent-%COMP%]{margin:0;top:0;left:0;position:absolute;width:100%;height:100vh}.loading[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.mint-container[_ngcontent-%COMP%]{margin-top:150px;max-width:500px;padding:20px;background-color:#242b3366;-webkit-backdrop-filter:blur(32px);backdrop-filter:blur(32px);opacity:.98;border-radius:10px;position:relative;border:1px solid rgba(6,31,39,.4)}@media only screen and (max-width: 700px){.mint-container[_ngcontent-%COMP%]{margin-top:100px}}.credit-container[_ngcontent-%COMP%]{max-width:500px;padding-top:10px;padding-right:10px;opacity:.95;position:relative;text-align:right;color:#ffffff4d}.credit-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:14px;text-transform:uppercase;font-weight:700;color:#fd874799!important;transition:all .2s ease-in-out}.credit-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{transition:all .2s ease-in-out;color:#fd8747!important}.logo[_ngcontent-%COMP%]{display:block;position:relative;top:-75px;width:150px;margin-left:auto;margin-right:auto;margin-bottom:0;padding-bottom:0}.logo[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{border:1px solid rgba(6,31,39,.4);text-align:center;background-color:#0000004d;border-radius:10px;width:150px;height:150px;padding-top:0;font-size:34px}.logo[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:10px}.logo[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding-top:30px}.logo[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;font-size:12px}div.content[_ngcontent-%COMP%]{margin-top:-60px}div.title[_ngcontent-%COMP%]{text-align:center;font-size:24px;font-weight:700;padding-top:0;margin-top:0;margin-bottom:20px}.meta[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:14px;color:#ddd;font-weight:600;display:block}.meta[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:14px;color:#fff;font-weight:400;display:block}.meta[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--color-teal)}.countdown[_ngcontent-%COMP%]{text-align:center;padding-top:20px;margin-bottom:10px;border-top:1px solid rgba(253,135,71,.1)}.countdown[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:18px;color:#ddd;font-weight:400;display:block}.countdown[_ngcontent-%COMP%]   .counter[_ngcontent-%COMP%]{font-size:24px;color:var(--color-yellow);font-weight:400;display:block}"]})}}]);