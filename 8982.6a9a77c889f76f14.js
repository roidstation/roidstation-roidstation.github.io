"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8982],{23443:(A,T,s)=>{s.d(T,{N:()=>f});var d,m=s(15861),g=s(54931),k=s(20553),i=s(19212);class f{constructor(){}fetchBaseTokenUSDPrice(){return(0,m.Z)(function*(){return(yield(0,g.qo)(k.N.api.endpoint)("query")({status:[{where:{chain_id:{_eq:k.N.chain.chainId}}},{base_token:!0,base_token_usd:!0}]})).status[0].base_token_usd||0})()}}(d=f).\u0275fac=function(h){return new(h||d)},d.\u0275prov=i.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})},48982:(A,T,s)=>{s.r(T),s.d(T,{MarketsPage:()=>v});var M,m=s(15861),g=s(96814),k=s(60095),i=s(93800),d=s(54931),f=s(20553),P=s(81360),h=s(14391),p=s(35768),b=s(22280),e=s(19212),E=s(23443),Z=s(98065),O=s(85219);function C(o,t){1&o&&(e.TgZ(0,"ion-title"),e._uU(1," CFT-20 Trading Markets (Deprecated) "),e.qZA())}function x(o,t){1&o&&(e.TgZ(0,"ion-title"),e._uU(1," CFT-20 Trading Markets "),e.qZA())}function U(o,t){1&o&&(e.TgZ(0,"div"),e._UZ(1,"ion-progress-bar",13),e.qZA())}function D(o,t){if(1&o&&(e.TgZ(0,"div",14)(1,"span",15),e._uU(2),e.qZA(),e.TgZ(3,"span",16),e._uU(4),e.ALo(5,"number"),e.qZA()()),2&o){const n=e.oxw();e.xp6(2),e.hij(" ",n.baseToken.base_token,"/USD "),e.xp6(2),e.hij(" $",e.xi3(5,2,n.baseToken.base_token_usd,"1.2-2")," ")}}function I(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"div",17)(1,"div")(2,"ion-input",18,19),e.NdJ("input",function(){e.CHM(n);const a=e.MAs(3);e.oxw();const u=e.MAs(14);return e.KtG(u.filterGlobal(a.value,"contains"))}),e._UZ(4,"ion-icon",20),e.qZA()()()}}function L(o,t){1&o&&(e.TgZ(0,"tr")(1,"th",21),e._uU(2,"Market "),e._UZ(3,"p-sortIcon",22),e.qZA(),e.TgZ(4,"th",23),e._uU(5,"Token "),e._UZ(6,"p-sortIcon",24),e.qZA(),e.TgZ(7,"th",25),e._uU(8,"Listings "),e._UZ(9,"p-sortIcon",26),e.qZA(),e.TgZ(10,"th",27),e._uU(11,"Token Price "),e._UZ(12,"p-sortIcon",28),e.qZA(),e.TgZ(13,"th",29),e._uU(14,"Volume 24h"),e._UZ(15,"p-sortIcon",30),e.qZA(),e.TgZ(16,"th"),e._uU(17,"\xa0"),e.qZA()())}function y(o,t){if(1&o){const n=e.EpF();e.TgZ(0,"ion-button",35),e.NdJ("click",function(a){e.CHM(n);const u=e.oxw().$implicit,l=e.oxw();return e.KtG(l.listSale(a,u.ticker))}),e._uU(1,"Sell"),e.qZA()}}const R=(o,t)=>["/app/market",o,t];function S(o,t){if(1&o&&(e.TgZ(0,"tr",31)(1,"td",32),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",33),e._uU(6),e.qZA(),e.TgZ(7,"td",33),e._uU(8),e.ALo(9,"tokenDecimals"),e.ALo(10,"number"),e.ALo(11,"tokenDecimals"),e.qZA(),e.TgZ(12,"td",33),e._uU(13),e.ALo(14,"number"),e.ALo(15,"tokenDecimals"),e.ALo(16,"number"),e.ALo(17,"tokenDecimals"),e.qZA(),e.TgZ(18,"td"),e.YNc(19,y,2,0,"ion-button",34),e.qZA()()),2&o){const n=t.$implicit,r=e.oxw();let a;e.Q6J("routerLink",e.WLB(30,R,"v"+r.version,n.ticker)),e.xp6(2),e.hij("",n.ticker," / ATOM"),e.xp6(2),e.Oqu(n.name),e.xp6(2),e.Oqu((null!==(a=n.marketplace_cft20_details)&&void 0!==a?a:n.token_open_positions).length),e.xp6(2),e.AsE("",e.xi3(9,9,n.last_price_base,n.decimals)," ATOM ($",e.xi3(10,12,r.baseToken.base_token_usd*e.xi3(11,15,n.last_price_base,n.decimals),"1.2-6"),")"),e.xp6(5),e.AsE(" ",e.xi3(14,18,e.xi3(15,21,n.volume_24_base,6),"1.2-6")," ATOM ($",e.xi3(16,24,r.baseToken.base_token_usd*e.xi3(17,27,n.volume_24_base,6),"1.2-6"),") "),e.xp6(6),e.Q6J("ngIf",null==n.token_holders[0]?null:n.token_holders[0].amount)}}function K(o,t){1&o&&(e.TgZ(0,"tr")(1,"td",36),e._uU(2,"No markets found"),e.qZA()())}const B=()=>({"min-width":"40rem"}),W=()=>["name","ticker"];class v{constructor(t,n,r,a){this.activatedRoute=t,this.priceService=n,this.modalCtrl=r,this.walletService=a,this.isLoading=!0,this.userAddress="",this.tokens=null,this.offset=0,this.limit=50,this.lastFetchCount=0,this.version=1,this.lastFetchCount=this.limit}ngOnInit(){var t=this;return(0,m.Z)(function*(){t.activatedRoute.params.subscribe(function(){var n=(0,m.Z)(function*(r){(yield t.walletService.isConnected())&&(t.userAddress=(yield t.walletService.getAccount()).address),t.isLoading=!0;const u=yield(0,d.qo)(f.N.api.endpoint)("query")({token:[{offset:t.offset,limit:t.limit,order_by:[{volume_24_base:"desc_nulls_last"}]},{id:!0,transaction:{hash:!0},token_open_positions:[{where:{is_filled:{_eq:!1},is_cancelled:{_eq:!1}}},{id:!0}],token_holders:[{where:{address:{_eq:t.userAddress}}},{amount:!0}],current_owner:!0,content_path:!0,name:!0,ticker:!0,max_supply:!0,circulating_supply:!0,decimals:!0,launch_timestamp:!0,last_price_base:!0,volume_24_base:!0,date_created:!0}],status:[{where:{chain_id:{_eq:f.N.chain.chainId}}},{base_token:!0,base_token_usd:!0}]});t.tokens=u.token,t.baseToken=u.status[0],t.isLoading=!1});return function(r){return n.apply(this,arguments)}}())})()}listSale(t,n){var r=this;return(0,m.Z)(function*(){t.stopPropagation(),(yield r.modalCtrl.create({keyboardClose:!0,backdropDismiss:!0,component:b.t,componentProps:{ticker:n}})).present()})()}customSort(t){var n,r;"listings"==t.field&&(null===(r=t.data)||void 0===r||r.sort((a,u)=>{let l=a.token_open_positions.length,_=u.token_open_positions.length,c=null;return c=null==l&&null!=_?-1:null!=l&&null==_?1:null==l&&null==_?0:"string"==typeof l&&"string"==typeof _?l.localeCompare(_):l<_?-1:l>_?1:0,t.order*c}));null===(n=t.data)||void 0===n||n.sort((a,u)=>{let l=a[t.field],_=u[t.field],c=null;return c=null==l&&null!=_?-1:null!=l&&null==_?1:null==l&&null==_?0:"string"==typeof l&&"string"==typeof _?l.localeCompare(_):l<_?-1:l>_?1:0,t.order*c})}}(M=v).\u0275fac=function(t){return new(t||M)(e.Y36(h.gz),e.Y36(E.N),e.Y36(i.IN),e.Y36(Z.X))},M.\u0275cmp=e.Xpm({type:M,selectors:[["app-markets"]],standalone:!0,features:[e.jDz],decls:19,vars:14,consts:[["fullscreen","true"],["size","12","offset","0","size-md","12","offset-md","0","size-md","10","offset-md","1","size-xl","8","offset-xl","2"],[1,"no-shadow"],["slot","start"],[4,"ngIf"],[1,"aligned","main-content"],["class","base-token-price",4,"ngIf"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} markets","styleClass","token-list","sortField","volume_24_base",3,"customSort","value","tableStyle","paginator","rows","showCurrentPageReport","globalFilterFields","sortOrder","sortFunction"],["data",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["type","indeterminate"],[1,"base-token-price"],[1,"ticker"],[1,"price"],[1,"flex","search"],["fill","outline","label","Search","labelPlacement","stacked","placeholder","Name or ticker",3,"input"],["textInput",""],["slot","end","name","search-outline","aria-hidden","true"],["pSortableColumn","ticker","pFrozenColumn",""],["field","ticker"],["pSortableColumn","name"],["field","name"],["pSortableColumn","listings"],["field","listings"],["pSortableColumn","last_price_base"],["field","last_price_base"],["pSortableColumn","volume_24_base"],["field","volume_24_base"],[3,"routerLink"],["pFrozenColumn",""],[1,"mono"],["fill","outline","color","warning",3,"click",4,"ngIf"],["fill","outline","color","warning",3,"click"],["colspan","4"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-content",0)(1,"ion-grid")(2,"ion-row")(3,"ion-col",1)(4,"ion-header",2)(5,"ion-toolbar")(6,"ion-buttons",3),e._UZ(7,"ion-menu-button"),e.qZA(),e.YNc(8,C,2,0,"ion-title",4)(9,x,2,0,"ion-title",4),e.qZA()(),e.TgZ(10,"div",5),e.YNc(11,U,2,0,"div",4)(12,D,6,5,"div",6),e.TgZ(13,"p-table",7,8),e.NdJ("sortFunction",function(a){return n.customSort(a)}),e.YNc(15,I,5,0,"ng-template",9)(16,L,18,0,"ng-template",10)(17,S,20,33,"ng-template",11)(18,K,3,0,"ng-template",12),e.qZA()()()()()()),2&t&&(e.xp6(8),e.Q6J("ngIf",1==n.version),e.xp6(1),e.Q6J("ngIf",2==n.version),e.xp6(2),e.Q6J("ngIf",n.isLoading),e.xp6(1),e.Q6J("ngIf",!n.isLoading),e.xp6(1),e.Q6J("customSort",!0)("value",n.tokens)("tableStyle",e.DdM(12,B))("paginator",!0)("rows",50)("showCurrentPageReport",!0)("globalFilterFields",e.DdM(13,W))("sortOrder",-1))},dependencies:[i.Pc,i.YG,i.Sm,i.wI,i.W2,i.jY,i.Gu,i.gu,i.pK,i.fG,i.X7,i.Nd,i.wd,i.sr,i.j9,i.YI,g.ez,g.O5,g.JJ,k.u5,P.u,h.rH,p.U$,p.iA,O.jx,p.lQ,p.on,p.fz],styles:[".list[_ngcontent-%COMP%]{text-align:left}@media only screen and (max-width: 900px){.list[_ngcontent-%COMP%]{text-align:center}}.filter[_ngcontent-%COMP%]{margin-top:-15px;color:#888}.token-holdings-list[_ngcontent-%COMP%]{margin-left:0;max-width:600px;margin-bottom:50px}.token-holdings-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{padding:5px;cursor:pointer;border-bottom:1px solid rgba(119,119,119,.2)}.token-holdings-list[_ngcontent-%COMP%]   .item.interactable[_ngcontent-%COMP%]{color:#ccc}.token-holdings-list[_ngcontent-%COMP%]   .item.interactable[_ngcontent-%COMP%]:hover{color:#57aaa7}.token-holdings-list[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{text-align:right}"]})}}]);