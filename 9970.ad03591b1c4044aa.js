"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9970],{99959:(C,E,o)=>{o.d(E,{J:()=>n});var c,d=o(19212);class n{constructor(){this.version="v1"}buildURN(_,f,m){const P=Array.from(m,([k,O])=>`${k}=${O}`).join(",");return`urn:marketplace:${_}@${this.version};${f}$${P}`}}(c=n).\u0275fac=function(_){return new(_||c)},c.\u0275prov=d.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})},23443:(C,E,o)=>{o.d(E,{N:()=>f});var _,d=o(15861),c=o(54931),n=o(20553),i=o(19212);class f{constructor(){}fetchBaseTokenUSDPrice(){return(0,d.Z)(function*(){return(yield(0,c.qo)(n.N.api.endpoint)("query")({status:[{where:{chain_id:{_eq:n.N.chain.chainId}}},{base_token:!0,base_token_usd:!0}]})).status[0].base_token_usd||0})()}}(_=f).\u0275fac=function(P){return new(P||_)},_.\u0275prov=i.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"})},29086:(C,E,o)=>{o.d(E,{t:()=>s});var g,d=o(15861),c=o(96814),n=o(60095),i=o(93800),_=o(84525),f=o(68890),m=o(20553),P=o(54931),M=o(81260),k=o(46711),O=o(20766),I=o(81360),b=o(82785),e=o(19212),Z=o(98065),U=o(50167),S=o(14391),L=o(99959);function B(l,a){if(1&l&&(e.TgZ(0,"div",22),e._uU(1),e.ALo(2,"number"),e.ALo(3,"stripSpaces"),e.ALo(4,"stripSpaces"),e.qZA()),2&l){const t=e.oxw();e.xp6(1),e.hij(" You will be selling your tokens for a total of ",e.xi3(2,1,e.lcZ(3,4,t.sellForm.value.basic.amount)*e.lcZ(4,6,t.sellForm.value.basic.price),"1.2-6")," ATOM ")}}function A(l,a){if(1&l&&(e.TgZ(0,"div",23),e._uU(1),e.ALo(2,"number"),e.qZA()),2&l){const t=e.oxw();e.xp6(1),e.hij(" The minimum value of the listing must be at least ",e.xi3(2,1,t.minTradeSize,"1.2-6")," ATOM ")}}function T(l,a){1&l&&(e.TgZ(0,"div",24)(1,"ion-text",25),e._uU(2,"Loading balance..."),e.qZA()())}function r(l,a){if(1&l&&(e.TgZ(0,"div",24)(1,"ion-text",25),e._uU(2),e.ALo(3,"number"),e.qZA()()),2&l){const t=e.oxw();e.xp6(2),e.AsE("You can't list more tokens than you have available. Your balance is ",e.xi3(3,2,t.senderBalance,"1.2-6")," ",t.ticker,"")}}class s{constructor(a,t,h,v,u,y){this.walletService=a,this.chainService=t,this.modalCtrl=h,this.router=v,this.builder=u,this.protocolService=y,this.ticker="tokens",this.minTradeSize=m.N.fees.protocol.marketplace["list.cft20"].minTradeSize,this.senderBalance=0,this.minDepositAbsolute=m.N.fees.protocol.marketplace["list.cft20"].minDepositAbsolute,this.minDepositPercent=m.N.fees.protocol.marketplace["list.cft20"].minDepositPercent,this.maxDepositPercent=m.N.fees.protocol.marketplace["list.cft20"].maxDepositPercent,this.minTimeout=m.N.fees.protocol.marketplace["list.cft20"].minTimeout,this.maxTimeout=m.N.fees.protocol.marketplace["list.cft20"].maxTimeout,this.loadingBalance=!0,this.maskPredicate=function(){var D=(0,d.Z)(function*(p){return p.getInputElement()});return function(p){return D.apply(this,arguments)}}(),this.decimalMaskPredicate=function(){var D=(0,d.Z)(function*(p){return p.getInputElement()});return function(p){return D.apply(this,arguments)}}(),(0,_.a)({checkmark:f.d29,closeOutline:f.fID,close:f.xvD}),this.sellForm=this.builder.group({basic:this.builder.group({amount:[10,[n.kI.required,n.kI.pattern("^[0-9. ]*$")]],price:[.1,[n.kI.required,n.kI.pattern("^[0-9. ]*$")]],minDeposit:[this.minDepositPercent,[n.kI.required,n.kI.min(this.minDepositPercent),n.kI.max(this.maxDepositPercent),n.kI.pattern("^[0-9. ]*$")]],timeoutBlocks:[this.minTimeout,[n.kI.required,n.kI.min(this.minTimeout),n.kI.max(this.maxTimeout),n.kI.pattern("^[0-9 ]*$")]]})}),this.numberMask=(0,M.f8)({decimalSeparator:".",thousandSeparator:" ",precision:0,min:1}),this.decimalMask=(0,M.f8)({decimalSeparator:".",thousandSeparator:" ",precision:6,min:0})}ngOnInit(){var a=this;return(0,d.Z)(function*(){const t=yield a.walletService.getAccount(),h=(0,P.qo)(m.N.api.endpoint),v=yield h("query")({token:[{where:{ticker:{_eq:a.ticker}}},{id:!0,decimals:!0,last_price_base:!0}]}),u=yield h("query")({token_holder:[{where:{address:{_eq:t.address},token_id:{_eq:v.token[0].id}}},{amount:!0}]});a.loadingBalance=!1,u.token_holder.length>0&&(a.senderBalance=I.u.prototype.transform(parseInt(u.token_holder[0].amount),v.token[0].decimals))})()}submit(){var a=this;return(0,d.Z)(function*(){if(!a.sellForm.valid)return void a.sellForm.markAllAsTouched();a.modalCtrl.dismiss();const t=b.C.prototype.transform(a.sellForm.value.basic.amount).toString(),h=b.C.prototype.transform(a.sellForm.value.basic.price).toString(),u=parseFloat(b.C.prototype.transform(a.sellForm.value.basic.minDeposit).toString())/100,y=b.C.prototype.transform(a.sellForm.value.basic.timeoutBlocks).toString(),D=new Map([["tic",a.ticker],["amt",t],["ppt",h],["mindep",u.toString()],["to",y]]);let p=parseFloat(t)*parseFloat(h)*u;p<a.minDepositAbsolute&&(p=a.minDepositAbsolute),p*=10**6,p=Math.floor(p);const x=a.protocolService.buildURN(m.N.chain.chainId,"list.cft20",D);(yield a.modalCtrl.create({keyboardClose:!0,backdropDismiss:!1,component:O.l,componentProps:{urn:x,metadata:null,data:null,routerLink:["/app/manage/token",a.ticker],resultCTA:"View transaction",metaprotocol:"marketplace",metaprotocolAction:"list.cft20",overrideFee:p}})).present()})()}cancel(){this.modalCtrl.dismiss()}}(g=s).\u0275fac=function(a){return new(a||g)(e.Y36(Z.X),e.Y36(U.l),e.Y36(i.IN),e.Y36(S.F0),e.Y36(n.qu),e.Y36(L.J))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-sell-modal"]],inputs:{ticker:"ticker"},standalone:!0,features:[e.jDz],decls:66,vars:39,consts:[["mode","md",1,"main-content"],[1,"form",3,"formGroup","ngSubmit"],[1,"p-3"],[1,"text-center"],["size-md","6","size","12"],["formGroupName","basic"],[1,"mt-4"],["label","Amount to sell","labelPlacement","stacked","fill","outline","placeholder","10","formControlName","amount",3,"maskito","maskitoElement"],["label","Price per token","labelPlacement","stacked","fill","outline","placeholder","10","formControlName","price",3,"maskito","maskitoElement"],["toggleIconSlot","start"],["slot","header"],["slot","content",1,"ion-padding"],[1,"note"],[1,"mt-4","w-50"],["label","Minimum deposit required","labelPlacement","stacked","fill","outline","placeholder","10","formControlName","minDeposit",3,"maskito","maskitoElement"],["label","Timout in blocks","labelPlacement","stacked","fill","outline","placeholder","5","formControlName","timeoutBlocks",3,"maskito","maskitoElement"],["class","p-3 mt-4 mb-4 confirmation",4,"ngIf"],["class","p-3 mt-4 mb-4 color-danger",4,"ngIf"],["class","p-3 mt-4 mb-4",4,"ngIf"],[1,"action"],["color","success","type","submit",3,"disabled"],["color","primary","fill","clear",3,"click"],[1,"p-3","mt-4","mb-4","confirmation"],[1,"p-3","mt-4","mb-4","color-danger"],[1,"p-3","mt-4","mb-4"],["color","warning"]],template:function(a,t){1&a&&(e.TgZ(0,"ion-content",0)(1,"form",1),e.NdJ("ngSubmit",function(){return t.submit()}),e.TgZ(2,"ion-grid",2)(3,"ion-row")(4,"ion-col",3)(5,"h2"),e._uU(6),e.qZA()()(),e.TgZ(7,"ion-row")(8,"ion-col")(9,"p"),e._uU(10," This transaction will list your tokens for sale"),e._UZ(11,"br"),e._uU(12,"You'll only receive the ATOM from the sale should someone purchase them "),e.qZA(),e.TgZ(13,"p"),e._uU(14," Sales are final and can't be refunded. You may cancel a listing at any time before a successful reservation "),e.qZA()()(),e.TgZ(15,"ion-row")(16,"ion-col",4)(17,"div",5)(18,"div",6),e._UZ(19,"ion-input",7),e.qZA()()(),e.TgZ(20,"ion-col",4)(21,"div",5)(22,"div",6),e._UZ(23,"ion-input",8),e.qZA()()()(),e.TgZ(24,"ion-row")(25,"ion-col")(26,"ion-accordion-group")(27,"ion-accordion",9)(28,"ion-item",10)(29,"ion-label"),e._uU(30,"Advanced"),e.qZA()(),e.TgZ(31,"div",11)(32,"p",12),e._uU(33," You do not need to adjust these parameters. The defaults should suffice. "),e.qZA(),e.TgZ(34,"div",5)(35,"div",13),e._UZ(36,"ion-input",14),e.TgZ(37,"span",12),e._uU(38),e.qZA()(),e.TgZ(39,"div",13),e._UZ(40,"ion-input",15),e.TgZ(41,"span",12),e._uU(42),e.qZA()()()()()()()(),e.TgZ(43,"ion-row")(44,"ion-col"),e.YNc(45,B,5,8,"div",16),e.ALo(46,"stripSpaces"),e.ALo(47,"stripSpaces"),e.ALo(48,"stripSpaces"),e.YNc(49,A,3,4,"div",17),e.ALo(50,"stripSpaces"),e.ALo(51,"stripSpaces"),e.ALo(52,"stripSpaces"),e.YNc(53,T,3,0,"div",18)(54,r,4,5,"div",18),e.ALo(55,"stripSpaces"),e.qZA()(),e.TgZ(56,"ion-row")(57,"ion-col")(58,"div",19)(59,"ion-button",20),e.ALo(60,"stripSpaces"),e.ALo(61,"stripSpaces"),e.ALo(62,"stripSpaces"),e._uU(63,"Confirm and list"),e.qZA(),e.TgZ(64,"ion-button",21),e.NdJ("click",function(){return t.cancel()}),e._uU(65,"Cancel"),e.qZA()()()()()()()),2&a&&(e.xp6(1),e.Q6J("formGroup",t.sellForm),e.xp6(5),e.hij("List ",t.ticker," for sale"),e.xp6(13),e.Q6J("maskito",t.decimalMask)("maskitoElement",t.maskPredicate),e.xp6(4),e.Q6J("maskito",t.decimalMask)("maskitoElement",t.maskPredicate),e.xp6(13),e.Q6J("maskito",t.decimalMask)("maskitoElement",t.maskPredicate),e.xp6(2),e.AsE("This is the minimum percent someone needs to pay to reserve the listing, ",t.minDepositPercent,"% - ",t.maxDepositPercent,"%"),e.xp6(2),e.Q6J("maskito",t.decimalMask)("maskitoElement",t.maskPredicate),e.xp6(2),e.AsE("How long a reservation will be valid for, ",t.minTimeout," - ",t.maxTimeout," blocks"),e.xp6(3),e.Q6J("ngIf",e.lcZ(46,19,t.sellForm.value.basic.amount)*e.lcZ(47,21,t.sellForm.value.basic.price)>=t.minTradeSize&&e.lcZ(48,23,t.sellForm.value.basic.amount)<=t.senderBalance),e.xp6(4),e.Q6J("ngIf",e.lcZ(50,25,t.sellForm.value.basic.amount)*e.lcZ(51,27,t.sellForm.value.basic.price)<t.minTradeSize&&e.lcZ(52,29,t.sellForm.value.basic.amount)<t.senderBalance),e.xp6(4),e.Q6J("ngIf",!1),e.xp6(1),e.Q6J("ngIf",!t.loadingBalance&&e.lcZ(55,31,t.sellForm.value.basic.amount)>t.senderBalance),e.xp6(5),e.Q6J("disabled",e.lcZ(60,33,t.sellForm.value.basic.amount)*e.lcZ(61,35,t.sellForm.value.basic.price)<t.minTradeSize||e.lcZ(62,37,t.sellForm.value.basic.amount)>t.senderBalance))},dependencies:[i.Pc,i.We,i.eh,i.YG,i.wI,i.W2,i.jY,i.pK,i.Ie,i.Q$,i.Nd,i.yW,i.j9,n.UX,n._Y,n.JJ,n.JL,n.sg,n.u,n.x0,c.ez,c.O5,c.JJ,n.u5,k.U5,k.ro,b.C],styles:["ion-content[_ngcontent-%COMP%]{--background: hsla(0, 0%, 100%, .05) !important;background-color:#ffffff0d!important;-webkit-backdrop-filter:blur(50px);backdrop-filter:blur(50px);height:100%;border-radius:10px;padding:20px;transition:all .2s ease-in-out}.confirmation[_ngcontent-%COMP%]{background-color:#0003;border-radius:10px;border:1px solid var(--color-teal)}.action[_ngcontent-%COMP%]{position:relative;bottom:20px;width:100%;text-align:center}.note[_ngcontent-%COMP%]{font-size:11px;color:#fff9}ion-list[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%], ion-list-header[_ngcontent-%COMP%], ion-label[_ngcontent-%COMP%], ion-accordion[_ngcontent-%COMP%], ion-accordion-group[_ngcontent-%COMP%]{--background: transparent;--ion-background-color: transparent !important;--background-color: transparent !important;background-color:transparent!important}ion-item[slot=header][_ngcontent-%COMP%]{color:#fff}ion-item[slot=header][_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{padding:0!important;margin:0!important}ion-accordion[_ngcontent-%COMP%]::part(expanded){background-color:#1e1e1e1a!important}ion-list-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{text-transform:uppercase;color:#fff;padding:0;margin:0}ion-item[_ngcontent-%COMP%]{--min-height: 25px;padding:0;--padding-bottom: 0px;--inner-padding-bottom: 0px}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-left:10px;--min-height: 25px;height:20px;padding:0;color:#ccc}"]})},12484:(C,E,o)=>{o.d(E,{T:()=>A});var g,d=o(15861),c=o(96814),n=o(60095),i=o(93800),_=o(84525),f=o(68890),m=o(20553),P=o(54931),M=o(81260),k=o(46711),O=o(20766),I=o(81360),b=o(82785),e=o(19212),Z=o(98065),U=o(50167),S=o(14391),L=o(41767);function B(T,r){if(1&T&&(e.TgZ(0,"div",13)(1,"ion-text",14),e._uU(2),e.ALo(3,"number"),e.qZA()()),2&T){const s=e.oxw();e.xp6(2),e.AsE("You can't send more tokens than you have available. Your balance is ",e.xi3(3,2,s.senderBalance,"1.2-6")," ",s.ticker,"")}}class A{constructor(r,s,l,a,t,h){this.walletService=r,this.chainService=s,this.modalCtrl=l,this.router=a,this.builder=t,this.protocolService=h,this.ticker="tokens",this.senderBalance=0,this.maskPredicate=function(){var v=(0,d.Z)(function*(u){return u.getInputElement()});return function(u){return v.apply(this,arguments)}}(),this.decimalMaskPredicate=function(){var v=(0,d.Z)(function*(u){return u.getInputElement()});return function(u){return v.apply(this,arguments)}}(),(0,_.a)({checkmark:f.d29,closeOutline:f.fID,close:f.xvD}),this.transferForm=this.builder.group({basic:this.builder.group({destination:["",[n.kI.required,n.kI.minLength(45),n.kI.maxLength(45),n.kI.pattern("^[a-zA-Z0-9]*$")]],amount:[10,[n.kI.required,n.kI.pattern("^[0-9. ]*$")]]})}),this.numberMask=(0,M.f8)({decimalSeparator:".",thousandSeparator:" ",precision:0,min:1}),this.decimalMask=(0,M.f8)({decimalSeparator:".",thousandSeparator:" ",precision:6,min:0})}ngOnInit(){var r=this;return(0,d.Z)(function*(){const s=yield r.walletService.getAccount(),l=(0,P.qo)(m.N.api.endpoint),a=yield l("query")({token:[{where:{ticker:{_eq:r.ticker}}},{id:!0,decimals:!0,last_price_base:!0}]}),t=yield l("query")({token_holder:[{where:{address:{_eq:s.address},token_id:{_eq:a.token[0].id}}},{amount:!0}]});t.token_holder.length>0&&(r.senderBalance=I.u.prototype.transform(parseInt(t.token_holder[0].amount),a.token[0].decimals))})()}submit(){var r=this;return(0,d.Z)(function*(){if(!r.transferForm.valid)return void r.transferForm.markAllAsTouched();r.modalCtrl.dismiss();const s=new Map([["tic",r.ticker],["amt",r.transferForm.value.basic.amount.replace(/\s/g,"")],["dst",r.transferForm.value.basic.destination]]),l=r.protocolService.buildURN(m.N.chain.chainId,"transfer",s);(yield r.modalCtrl.create({keyboardClose:!0,backdropDismiss:!1,component:O.l,componentProps:{urn:l,metadata:null,data:null,routerLink:["/app/manage/token",r.ticker],resultCTA:"View transaction",metaprotocol:"cft20",metaprotocolAction:"transfer"}})).present()})()}cancel(){this.modalCtrl.dismiss()}}(g=A).\u0275fac=function(r){return new(r||g)(e.Y36(Z.X),e.Y36(U.l),e.Y36(i.IN),e.Y36(S.F0),e.Y36(n.qu),e.Y36(L._))},g.\u0275cmp=e.Xpm({type:g,selectors:[["app-transfer-modal"]],inputs:{ticker:"ticker"},standalone:!0,features:[e.jDz],decls:28,vars:13,consts:[["mode","md",1,"main-content"],[1,"form",3,"formGroup","ngSubmit"],[1,"p-3"],[1,"text-center"],["size-md","8","offset-md","2","size","12"],["formGroupName","basic"],[1,"mt-4"],["label","Amount to transfer","labelPlacement","stacked","fill","outline","placeholder","10","formControlName","amount",3,"maskito","maskitoElement"],["label","Destination address","labelPlacement","stacked","fill","outline","placeholder","cosmos1xxxxxx","formControlName","destination","errorText","Please enter a Cosmos Hub Address",3,"counter","minlength","maxlength"],["class","p-3 mt-4 mb-4",4,"ngIf"],[1,"action"],["color","success","type","submit",3,"disabled"],["color","primary","fill","clear",3,"click"],[1,"p-3","mt-4","mb-4"],["color","warning"]],template:function(r,s){1&r&&(e.TgZ(0,"ion-content",0)(1,"form",1),e.NdJ("ngSubmit",function(){return s.submit()}),e.TgZ(2,"ion-grid",2)(3,"ion-row")(4,"ion-col",3)(5,"h2"),e._uU(6),e.qZA()()(),e.TgZ(7,"ion-row")(8,"ion-col")(9,"p"),e._uU(10," Transfers are final and can't be cancelled "),e.qZA()()(),e.TgZ(11,"ion-row")(12,"ion-col",4)(13,"div",5)(14,"div",6),e._UZ(15,"ion-input",7),e.qZA(),e.TgZ(16,"div",6),e._UZ(17,"ion-input",8),e.qZA(),e.YNc(18,B,4,5,"div",9),e.ALo(19,"stripSpaces"),e.qZA()()(),e.TgZ(20,"ion-row")(21,"ion-col")(22,"div",10)(23,"ion-button",11),e.ALo(24,"stripSpaces"),e._uU(25,"Send now"),e.qZA(),e.TgZ(26,"ion-button",12),e.NdJ("click",function(){return s.cancel()}),e._uU(27,"Cancel"),e.qZA()()()()()()()),2&r&&(e.xp6(1),e.Q6J("formGroup",s.transferForm),e.xp6(5),e.hij("Send ",s.ticker," tokens"),e.xp6(9),e.Q6J("maskito",s.decimalMask)("maskitoElement",s.maskPredicate),e.xp6(2),e.Q6J("counter",!0)("minlength",45)("maxlength",45),e.xp6(1),e.Q6J("ngIf",e.lcZ(19,9,s.transferForm.value.basic.amount)>s.senderBalance),e.xp6(5),e.Q6J("disabled",e.lcZ(24,11,s.transferForm.value.basic.amount)>s.senderBalance))},dependencies:[i.Pc,i.YG,i.wI,i.W2,i.jY,i.pK,i.Nd,i.yW,i.j9,n.UX,n._Y,n.JJ,n.JL,n.wO,n.nD,n.sg,n.u,n.x0,c.ez,c.O5,c.JJ,n.u5,k.U5,k.ro,b.C],styles:["ion-content[_ngcontent-%COMP%]{--background: hsla(0, 0%, 100%, .05) !important;background-color:#ffffff0d!important;-webkit-backdrop-filter:blur(50px);backdrop-filter:blur(50px);height:100%;border-radius:10px;padding:20px;transition:all .2s ease-in-out}.confirmation[_ngcontent-%COMP%]{background-color:#0003;border-radius:10px;border:1px solid var(--color-yellow)}.action[_ngcontent-%COMP%]{position:fixed;bottom:20px;width:100%;text-align:center}"]})}}]);