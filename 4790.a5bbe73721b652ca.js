"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4790],{64790:(ie,f,a)=>{a.r(f),a.d(f,{ViewTokenPage:()=>w});var d,m=a(15861),c=a(96814),U=a(60095),x=a(14391),i=a(93800),_=a(35768),g=a(20553),L=a(24465),D=a(54481),C=a(81360),Z=a(54931),b=a(29086),y=a(20766),O=a(12484),E=a(241),e=a(19212),M=a(41767),q=a(98065),I=a(23443),A=a(6593),S=a(85219);function z(n,o){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij("#",t.token.id-1,"")}}function J(n,o){1&n&&(e.TgZ(0,"div",11),e._UZ(1,"ion-progress-bar",12),e.TgZ(2,"p"),e._uU(3," Loading token... "),e.qZA()())}function K(n,o){if(1&n&&e._UZ(0,"img",39),2&n){const t=e.oxw(2);e.Q6J("src",t.token.content_path,e.LSH)}}function R(n,o){1&n&&(e.TgZ(0,"div",40),e._UZ(1,"img",41),e.qZA())}function V(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"ion-button",45),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3);return e.KtG(r.mint())}),e._uU(1,"Mint now"),e.qZA()}}function B(n,o){if(1&n&&(e.TgZ(0,"ion-col",42),e.YNc(1,V,2,0,"ion-button",43),e.TgZ(2,"ion-button",44),e._uU(3,"Open mint page"),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.tokenIsLaunched),e.xp6(1),e.MGl("href","/mint/",t.token.ticker,"")}}function Q(n,o){if(1&n&&(e.TgZ(0,"ion-col",42)(1,"ion-text",46),e._uU(2),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(2),e.hij("All $",t.token.ticker," tokens have been minted")}}function W(n,o){1&n&&(e.TgZ(0,"h4"),e._uU(1,"Your balance"),e.qZA())}function Y(n,o){1&n&&(e.TgZ(0,"h4"),e._uU(1,"Loading balance..."),e.qZA())}function N(n,o){if(1&n&&(e.TgZ(0,"div",23),e._UZ(1,"span",25),e.TgZ(2,"span",26),e._uU(3),e.ALo(4,"tokenDecimals"),e.ALo(5,"number"),e.ALo(6,"tokenDecimals"),e.ALo(7,"tokenDecimals"),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(3),e.lnq("",e.xi3(4,3,t.holding.amount,t.token.decimals)," ",t.token.ticker," ($",e.xi3(5,6,e.xi3(6,9,t.holding.amount,t.token.decimals)*e.xi3(7,12,t.baseTokenUSD*t.token.last_price_base,t.token.decimals),"1.2-6"),")")}}function $(n,o){1&n&&(e.TgZ(0,"tr")(1,"th",52),e._uU(2,"Holder # "),e._UZ(3,"p-sortIcon",53),e.qZA(),e.TgZ(4,"th",54),e._uU(5,"Address "),e._UZ(6,"p-sortIcon",55),e.qZA(),e.TgZ(7,"th",56),e._uU(8,"Amount "),e._UZ(9,"p-sortIcon",57),e.qZA()())}const h=n=>["/app/wallet",n];function H(n,o){if(1&n&&(e.TgZ(0,"tr",58)(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",59),e._uU(4),e.ALo(5,"async"),e.ALo(6,"shortenAddress"),e.qZA(),e.TgZ(7,"td",59),e._uU(8),e.ALo(9,"number"),e.ALo(10,"tokenDecimals"),e.qZA()()),2&n){const t=o.$implicit,s=e.oxw(3);e.Q6J("routerLink",e.VKq(14,h,t.address)),e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(e.lcZ(5,4,e.lcZ(6,6,t.address))),e.xp6(4),e.Oqu(e.xi3(9,8,e.xi3(10,11,t.amount,s.token.decimals),"1.6-6"))}}function G(n,o){1&n&&(e.TgZ(0,"tr")(1,"td",60),e._uU(2,"Token has no holders"),e.qZA()())}const F=()=>({"min-width":"30rem"});function j(n,o){if(1&n&&(e.TgZ(0,"ion-row")(1,"ion-col")(2,"p-table",47,48),e.YNc(4,$,10,0,"ng-template",49)(5,H,11,16,"ng-template",50)(6,G,3,0,"ng-template",51),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("value",t.holders)("tableStyle",e.DdM(6,F))("paginator",!0)("rows",100)("showCurrentPageReport",!0)("sortOrder",-1)}}const v=()=>({section:"tokens"});function X(n,o){if(1&n&&(e.TgZ(0,"ion-row")(1,"ion-col",61)(2,"ion-grid")(3,"ion-row",35)(4,"ion-col")(5,"div",23)(6,"span",25),e._uU(7,"Created by"),e.qZA(),e.TgZ(8,"a",62)(9,"ion-chip")(10,"ion-avatar"),e._UZ(11,"img",63),e.qZA(),e.TgZ(12,"ion-label"),e._uU(13),e.ALo(14,"async"),e.ALo(15,"shortenAddress"),e.qZA()()()()(),e.TgZ(16,"ion-col")(17,"div",23)(18,"span",25),e._uU(19,"Owned by"),e.qZA(),e.TgZ(20,"a",62)(21,"ion-chip")(22,"ion-avatar"),e._UZ(23,"img",63),e.qZA(),e.TgZ(24,"ion-label"),e._uU(25),e.ALo(26,"async"),e.ALo(27,"shortenAddress"),e.qZA()()()()()(),e.TgZ(28,"ion-row",35)(29,"ion-col")(30,"div",23)(31,"span",25),e._uU(32,"Created on"),e.qZA(),e.TgZ(33,"span",26),e._uU(34),e.ALo(35,"date"),e.ALo(36,"date"),e.qZA(),e.TgZ(37,"span",26),e._uU(38),e.ALo(39,"number"),e.qZA()()()(),e.TgZ(40,"ion-row",35)(41,"ion-col")(42,"div",23)(43,"span",25),e._uU(44,"Transaction"),e.qZA(),e.TgZ(45,"span",26)(46,"a",64),e._uU(47),e.qZA()()()()()()()()),2&n){const t=e.oxw(2);e.xp6(8),e.Q6J("routerLink",e.VKq(29,h,t.token.creator))("queryParams",e.DdM(31,v)),e.xp6(5),e.Oqu(e.lcZ(14,12,e.lcZ(15,14,t.token.creator))),e.xp6(7),e.Q6J("routerLink",e.VKq(32,h,t.token.current_owner))("queryParams",e.DdM(34,v)),e.xp6(5),e.Oqu(e.lcZ(26,16,e.lcZ(27,18,t.token.current_owner))),e.xp6(9),e.AsE("",e.xi3(35,20,t.token.date_created,"longDate")," ",e.xi3(36,23,t.token.date_created,"shortTime"),""),e.xp6(4),e.hij("Block ",e.xi3(39,26,t.token.height,"1.0-0"),""),e.xp6(8),e.hYB("href","",t.explorerTxUrl,"",t.token.transaction.hash,"",e.LSH),e.xp6(1),e.Oqu(t.token.transaction.hash)}}const ee=n=>["/app/market",n],te=n=>["/app/wallet/token",n];function oe(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",13)(1,"ion-grid")(2,"ion-row")(3,"ion-col",14)(4,"div",15),e.YNc(5,K,1,1,"img",16)(6,R,2,0,"div",17),e.qZA()(),e.TgZ(7,"ion-col",18)(8,"h1",19),e._uU(9),e.qZA(),e.TgZ(10,"p",20),e._uU(11),e.qZA()()(),e.TgZ(12,"ion-row")(13,"ion-col")(14,"ion-grid")(15,"ion-row",21)(16,"ion-col",22)(17,"div",23)(18,"h4"),e._uU(19,"Tokenomics"),e.qZA()()(),e.TgZ(20,"ion-col",24)(21,"div",23)(22,"span",25),e._uU(23,"Max supply"),e.qZA(),e.TgZ(24,"span",26),e._uU(25),e.ALo(26,"number"),e.ALo(27,"tokenDecimals"),e.qZA()()(),e.TgZ(28,"ion-col",24)(29,"div",23)(30,"span",25),e._uU(31,"Circulating"),e.qZA(),e.TgZ(32,"span",26),e._uU(33),e.ALo(34,"number"),e.ALo(35,"humanSupply"),e.ALo(36,"tokenDecimals"),e.ALo(37,"number"),e.qZA()()(),e.TgZ(38,"ion-col",24)(39,"div",23)(40,"span",25),e._uU(41,"Price"),e.qZA(),e.TgZ(42,"span",26),e._uU(43),e.ALo(44,"tokenDecimals"),e.ALo(45,"number"),e.ALo(46,"tokenDecimals"),e.qZA()()(),e.TgZ(47,"ion-col",24)(48,"div",23)(49,"span",25),e._uU(50,"Market cap"),e.qZA(),e.TgZ(51,"span",26),e._uU(52),e.ALo(53,"number"),e.ALo(54,"tokenDecimals"),e.ALo(55,"tokenDecimals"),e.qZA()()(),e.TgZ(56,"ion-col",24)(57,"div",23)(58,"span",25),e._uU(59,"Limit per mint"),e.qZA(),e.TgZ(60,"span",26),e._uU(61),e.ALo(62,"number"),e.ALo(63,"tokenDecimals"),e.qZA()()(),e.TgZ(64,"ion-col",24)(65,"div",23)(66,"span",25),e._uU(67),e.qZA(),e.TgZ(68,"span",26),e._uU(69),e.ALo(70,"date"),e.ALo(71,"date"),e.qZA()()(),e.YNc(72,B,4,2,"ion-col",27)(73,Q,3,1,"ion-col",27),e.qZA()()()()(),e.TgZ(74,"ion-grid")(75,"ion-row",28)(76,"ion-col",29),e.YNc(77,W,2,0,"h4",5)(78,Y,2,0,"h4",5)(79,N,8,15,"div",30),e.TgZ(80,"div",31)(81,"ion-button",32),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.transfer())}),e._uU(82,"Send"),e.qZA(),e.TgZ(83,"ion-button",32),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.listSale())}),e._uU(84,"Sell"),e.qZA(),e.TgZ(85,"ion-button",33),e._uU(86,"Trade"),e.qZA(),e.TgZ(87,"ion-button",34),e._uU(88,"History"),e.qZA()()()(),e.TgZ(89,"ion-row",35)(90,"ion-col",22)(91,"ion-segment",36),e.NdJ("ionChange",function(r){e.CHM(t);const l=e.oxw();return e.KtG(l.sectionChanged(r))}),e.TgZ(92,"ion-segment-button",37)(93,"ion-label"),e._uU(94,"Holders"),e.qZA()(),e.TgZ(95,"ion-segment-button",38)(96,"ion-label"),e._uU(97,"Metadata"),e.qZA()()()()(),e.YNc(98,j,7,7,"ion-row",5)(99,X,48,35,"ion-row",5),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(5),e.Q6J("ngIf",t.token.content_path),e.xp6(1),e.Q6J("ngIf",!t.token.content_path),e.xp6(3),e.Oqu(t.token.ticker),e.xp6(2),e.Oqu(t.token.name),e.xp6(14),e.Oqu(e.xi3(26,26,e.xi3(27,29,t.token.max_supply,t.token.decimals),"1.2-6")),e.xp6(8),e.AsE("",e.xi3(34,32,e.lcZ(35,35,e.xi3(36,37,t.token.circulating_supply,t.token.decimals)),"1.2-6")," (",e.xi3(37,40,t.token.circulating_supply/t.token.max_supply*100,"1.2-4"),"%)"),e.xp6(10),e.AsE("",e.xi3(44,43,t.token.last_price_base,t.token.decimals)," ATOM ($",e.xi3(45,46,t.baseTokenUSD*e.xi3(46,49,t.token.last_price_base,t.token.decimals),"1.2-6"),")"),e.xp6(9),e.hij(" $",e.xi3(53,52,e.xi3(54,55,t.token.circulating_supply,t.token.decimals)*e.xi3(55,58,t.baseTokenUSD*t.token.last_price_base,t.token.decimals),"1.2-6")," "),e.xp6(9),e.Oqu(e.xi3(62,61,e.xi3(63,64,t.token.per_mint_limit,t.token.decimals),"1.2-6")),e.xp6(6),e.Oqu(t.tokenIsLaunched?"Launched at":"Launching"),e.xp6(2),e.AsE("",e.xi3(70,67,t.tokenLaunchDate,"longDate")," ",e.xi3(71,70,t.tokenLaunchDate,"shortTime"),""),e.xp6(3),e.Q6J("ngIf",t.token.circulating_supply<t.token.max_supply),e.xp6(1),e.Q6J("ngIf",t.token.circulating_supply>=t.token.max_supply),e.xp6(4),e.Q6J("ngIf",t.holding),e.xp6(1),e.Q6J("ngIf",!t.holding&&t.walletConnected),e.xp6(1),e.Q6J("ngIf",t.holding),e.xp6(2),e.Q6J("disabled",!t.holding||0==t.holding.amount),e.xp6(2),e.Q6J("disabled",!t.holding||0==t.holding.amount),e.xp6(2),e.Q6J("routerLink",e.VKq(73,ee,t.token.ticker)),e.xp6(2),e.Q6J("disabled",!t.walletConnected)("routerLink",e.VKq(75,te,t.token.ticker)),e.xp6(11),e.Q6J("ngIf","holders"==t.selectedSection),e.xp6(1),e.Q6J("ngIf","metadata"==t.selectedSection)}}class w{constructor(o,t,s,r,l,p,k,u){this.activatedRoute=o,this.protocolService=t,this.modalCtrl=s,this.alertController=r,this.walletService=l,this.priceService=p,this.titleService=k,this.meta=u,this.isLoading=!1,this.holders=[],this.explorerTxUrl=g.N.api.explorer,this.tokenIsLaunched=!1,this.selectedSection="holders",this.walletConnected=!1,this.baseTokenUSD=0,this.tokenLaunchDate=new Date}ngOnInit(){var o=this;return(0,m.Z)(function*(){o.isLoading=!0,o.selectedSection=o.activatedRoute.snapshot.queryParams.section||"holders",o.walletConnected=yield o.walletService.isConnected();const t=(0,Z.qo)(g.N.api.endpoint);yield Promise.all([o.priceService.fetchBaseTokenUSDPrice().then(T=>o.baseTokenUSD=T),t("query")({token:[{where:{ticker:{_eq:o.activatedRoute.snapshot.params.ticker.toUpperCase()}}},{id:!0,height:!0,transaction:{hash:!0},creator:!0,current_owner:!0,name:!0,ticker:!0,decimals:!0,max_supply:!0,per_mint_limit:!0,launch_timestamp:!0,last_price_base:!0,content_path:!0,content_size_bytes:!0,circulating_supply:!0,date_created:!0}]}).then(T=>o.token=T.token[0])]);const{name:s,ticker:r,content_path:l,id:p,transaction:k}=o.token,u=`${r} | ${s} | on Asteroid Protocol`;o.titleService.setTitle(u),o.meta.updateTag({property:"og:url",content:`https://asteroidprotocol.io/app/inscription/${k.hash}`}),o.meta.updateTag({property:"og:title",content:u}),o.meta.updateTag({property:"og:image",content:l}),o.meta.updateTag({property:"og:description",content:`${r} | CFT-20 Token #${p} on Asteroid Protocol`}),o.meta.updateTag({name:"description",content:`${r} | CFT-20 Token #${p} on Asteroid Protocol`}),o.meta.updateTag({property:"twitter:url",content:`https://asteroidprotocol.io/app/inscription/${k.hash}`}),o.meta.updateTag({property:"twitter:title",content:u}),o.meta.updateTag({property:"twitter:image",content:l}),o.meta.updateTag({property:"twitter:description",content:`${r} | CFT-20 Token #${p} on Asteroid Protocol`}),o.meta.updateTag({property:"twitter:card",content:"summary"}),o.tokenLaunchDate=new Date(1e3*o.token.launch_timestamp),o.tokenLaunchDate.getTime()<Date.now()&&(o.tokenIsLaunched=!0),o.walletConnected&&(0,Z.w0)(g.N.api.wss)("subscription")({token_holder:[{where:{address:{_eq:(yield o.walletService.getAccount()).address},token_id:{_eq:o.token.id}}},{id:!0,token:{ticker:!0,content_path:!0,max_supply:!0,circulating_supply:!0,decimals:!0,transaction:{hash:!0}},amount:!0,date_updated:!0}]}).on(({token_holder:P})=>{P.length>0?o.holding=P[0]:o.holding={amount:0}}),o.isLoading=!1;const ne=yield t("query")({token_holder:[{offset:0,limit:100,order_by:[{amount:"desc_nulls_last"}],where:{token_id:{_eq:o.token.id},amount:{_gt:0}}},{id:!0,address:!0,token:{decimals:!0},amount:!0,date_updated:!0}]});o.holders=ne.token_holder})()}mint(){var o=this;return(0,m.Z)(function*(){if(!o.walletService.hasWallet())return void(yield o.modalCtrl.create({keyboardClose:!0,backdropDismiss:!0,component:E.f,cssClass:"wallet-required-modal"})).present();const t=new Map([["tic",o.token.ticker],["amt",o.token.per_mint_limit]]),s=o.protocolService.buildURN(g.N.chain.chainId,"mint",t);(yield o.modalCtrl.create({keyboardClose:!0,backdropDismiss:!1,component:y.l,componentProps:{urn:s,metadata:null,data:null,routerLink:["/app/wallet/token",o.token.ticker],resultCTA:"View transaction",metaprotocol:"cft20",metaprotocolAction:"mint"}})).present()})()}sectionChanged(o){this.selectedSection=o.detail.value}listSale(){var o=this;return(0,m.Z)(function*(){(yield o.modalCtrl.create({keyboardClose:!0,backdropDismiss:!0,component:b.t,componentProps:{ticker:o.token.ticker}})).present()})()}transfer(){var o=this;return(0,m.Z)(function*(){(yield o.modalCtrl.create({keyboardClose:!0,backdropDismiss:!0,component:O.T,componentProps:{ticker:o.token.ticker}})).present()})()}}(d=w).\u0275fac=function(o){return new(o||d)(e.Y36(x.gz),e.Y36(M._),e.Y36(i.IN),e.Y36(i.Br),e.Y36(q.X),e.Y36(I.N),e.Y36(A.Dx),e.Y36(A.h_))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-view-token"]],standalone:!0,features:[e.jDz],decls:18,vars:3,consts:[["fullscreen","true"],["size","12","offset","0","size-md","12","offset-md","0","size-md","10","offset-md","1","size-xl","8","offset-xl","2"],[1,"no-shadow"],["slot","start"],["defaultHref","/app/tokens"],[4,"ngIf"],["size","12","offset","0","size-md","12","offset-md","0","size-md","10","offset-md","1","size-xl","8","offset-xl","2",1,"main-content"],[1,"p-4"],["class","loading",4,"ngIf"],["class","aligned",4,"ngIf"],[2,"height","100px"],[1,"loading"],["type","indeterminate"],[1,"aligned"],["size-lg","2","size-xs","4"],[1,"text-center"],["class","rounded",3,"src",4,"ngIf"],["class","ticker",4,"ngIf"],["size-xl","8","size-lg","6","size-sm","8","size-xs","8"],[1,"mt-0"],[1,"note"],[1,"break","pb-3"],["size","12"],[1,"meta"],["size","6"],[1,"label"],[1,"value"],["size","12","class","pt-3",4,"ngIf"],[1,"own-balance"],["size","12",1,"ps-3","pt-0"],["class","meta",4,"ngIf"],[1,"mt-2","mb-3"],["color","primary","fill","outline",3,"disabled","click"],["color","primary","fill","outline",3,"routerLink"],["color","primary","fill","outline",3,"disabled","routerLink"],[1,"pt-3"],["value","holders","color","primary",3,"ionChange"],["value","holders"],["value","metadata"],[1,"rounded",3,"src"],[1,"ticker"],["src","../../assets/logo/a-white-on-transparent-250.png",1,"no-logo","rounded"],["size","12",1,"pt-3"],["color","warning",3,"click",4,"ngIf"],["color","primary","fill","clear","target","_blank",3,"href"],["color","warning",3,"click"],["color","warning"],["currentPageReportTemplate","Showing {first} to {last} of {totalRecords} holders","styleClass","token-list","sortField","amount",3,"value","tableStyle","paginator","rows","showCurrentPageReport","sortOrder"],["data",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pSortableColumn","id","pFrozenColumn",""],["field","id"],["pSortableColumn","address"],["field","address"],["pSortableColumn","amount"],["field","amount"],[3,"routerLink"],[1,"mono"],["colspan","4"],["size","12","size-lg","8","offset-lg","2"],[3,"routerLink","queryParams"],["alt","Unknown avatar","src","../../assets/avatar.svg"],["target","_blank",3,"href"]],template:function(o,t){1&o&&(e.TgZ(0,"ion-content",0)(1,"ion-grid")(2,"ion-row")(3,"ion-col",1)(4,"ion-header",2)(5,"ion-toolbar")(6,"ion-buttons",3),e._UZ(7,"ion-menu-button")(8,"ion-back-button",4),e.qZA(),e.TgZ(9,"ion-title"),e._uU(10," Token "),e.YNc(11,z,2,1,"span",5),e.qZA()()()()(),e.TgZ(12,"ion-row")(13,"ion-col",6)(14,"div",7),e.YNc(15,J,4,0,"div",8),e.qZA(),e.YNc(16,oe,100,77,"div",9),e._UZ(17,"div",10),e.qZA()()()()),2&o&&(e.xp6(11),e.Q6J("ngIf",!t.isLoading),e.xp6(4),e.Q6J("ngIf",t.isLoading),e.xp6(1),e.Q6J("ngIf",!t.isLoading))},dependencies:[i.Pc,i.BJ,i.YG,i.Sm,i.hM,i.wI,i.W2,i.jY,i.Gu,i.Q$,i.fG,i.X7,i.Nd,i.cJ,i.GO,i.yW,i.wd,i.sr,i.QI,i.oU,i.YI,i.Fo,c.ez,c.O5,c.Ov,c.JJ,c.uU,U.u5,D.x,x.rH,L.S,C.u,_.U$,_.iA,S.jx,_.lQ,_.on,_.fz],styles:["h1[_ngcontent-%COMP%]{font-size:36px}.meta[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:14px;color:#ddd;font-weight:600;display:block}.meta[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:14px;color:#fff;font-weight:300;display:block}.meta[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--color-teal)}.ticker[_ngcontent-%COMP%]{max-width:250px;max-height:250px;margin-left:auto;margin-right:auto;background-color:#0000004d;border-radius:10px}.own-balance[_ngcontent-%COMP%]{text-align:left;background-color:#0000001a}"]})}}]);