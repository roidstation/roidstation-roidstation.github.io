"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[8936],{48936:(A,d,o)=>{o.r(d),o.d(d,{ListInscriptionsPage:()=>g});var _,c=o(15861),l=o(96814),p=o(60095),e=o(93800),h=o(54931),f=o(20553),m=o(71255),v=o(10044),u=o(14391),I=o(15075),P=o(29569),n=o(19212);function Z(s,t){1&s&&(n.TgZ(0,"div"),n._UZ(1,"ion-progress-bar",14),n.qZA())}const E=s=>["/app/inscription",s];function O(s,t){if(1&s&&(n.TgZ(0,"a",18)(1,"div",19),n._UZ(2,"app-generic-preview",20),n.qZA(),n.TgZ(3,"h4",21),n._uU(4),n.qZA(),n.TgZ(5,"div",22)(6,"div",23)(7,"span"),n._uU(8),n.qZA()(),n.TgZ(9,"div",23)(10,"span"),n._uU(11),n.ALo(12,"humanType"),n.ALo(13,"number"),n.qZA()(),n.TgZ(14,"div",23)(15,"span"),n._uU(16),n.ALo(17,"dateAgo"),n.qZA()()()()),2&s){const i=t.$implicit;n.Q6J("routerLink",n.VKq(16,E,i.transaction.hash)),n.xp6(2),n.Q6J("mime",i.mime)("contentPath",i.content_path)("isExplicit",i.is_explicit),n.xp6(2),n.Oqu(i.name),n.xp6(4),n.hij("#",i.id-1,""),n.xp6(3),n.AsE("",n.lcZ(12,9,i.mime)," (",n.xi3(13,11,i.content_size_bytes/1024,"1.0-1")," kb)"),n.xp6(5),n.Oqu(n.lcZ(17,14,i.date_created))}}function T(s,t){if(1&s){const i=n.EpF();n.TgZ(0,"div",15),n.YNc(1,O,18,18,"a",16),n.TgZ(2,"ion-infinite-scroll",17),n.NdJ("ionInfinite",function(a){n.CHM(i);const M=n.oxw();return n.KtG(M.onIonInfinite(a))}),n._UZ(3,"ion-infinite-scroll-content"),n.qZA()()}if(2&s){const i=n.oxw();n.xp6(1),n.Q6J("ngForOf",i.inscriptions)}}function L(s,t){1&s&&(n.TgZ(0,"div",15),n._uU(1," No inscriptions found "),n.qZA())}class g{constructor(t){this.activatedRoute=t,this.isLoading=!0,this.selectedAddress="",this.inscriptions=null,this.offset=0,this.limit=50,this.lastFetchCount=0,this.order="desc",this.lastFetchCount=this.limit,this.chain=(0,h.qo)(f.N.api.endpoint)}ngOnInit(){var t=this;return(0,c.Z)(function*(){t.activatedRoute.params.subscribe(function(){var i=(0,c.Z)(function*(r){t.selectedAddress=r.address,t.isLoading=!0;const a=yield t.fetchInscriptions();t.inscriptions=a.inscription,t.isLoading=!1});return function(r){return i.apply(this,arguments)}}())})()}onIonInfinite(t){var i=this;return(0,c.Z)(function*(){if(i.lastFetchCount<i.limit)return void(yield t.target.complete());i.offset+=i.limit;const r=yield i.fetchInscriptions();i.inscriptions.push(...r.inscription),i.lastFetchCount=r.inscription.length,yield t.target.complete()})()}onChangeOrder(){var t=this;return(0,c.Z)(function*(){t.offset=0;const i=yield t.fetchInscriptions();t.inscriptions=i.inscription})()}onChangeSearch(t){var i=this;return(0,c.Z)(function*(){if(t&&!isNaN(+t)){const r=yield i.fetchInscriptions(+t+1);i.inscriptions=r.inscription}})()}fetchInscriptions(t){var i=this;return(0,c.Z)(function*(){return i.chain("query")({inscription:[{offset:t?0:i.offset,limit:t?1:i.limit,order_by:[{date_created:i.order}],where:{...t?{id:{_eq:t}}:{},current_owner:{_eq:i.selectedAddress}}},{id:!0,transaction:{hash:!0},current_owner:!0,content_path:!0,content_size_bytes:!0,date_created:!0,is_explicit:!0,__alias:{name:{metadata:[{path:"$.metadata.name"},!0]},description:{metadata:[{path:"$.metadata.description"},!0]},mime:{metadata:[{path:"$.metadata.mime"},!0]}}}]})})()}}(_=g).\u0275fac=function(t){return new(t||_)(n.Y36(u.gz))},_.\u0275cmp=n.Xpm({type:_,selectors:[["app-list-inscriptions"]],standalone:!0,features:[n.jDz],decls:30,vars:5,consts:[["fullscreen","true"],["size","12","offset","0","size-md","12","offset-md","0","size-md","10","offset-md","1","size-xl","10","offset-xl","1"],[1,"no-shadow","me-5"],["slot","start"],["lines","none"],["placeholder","Search for #",3,"debounce","ionInput"],["size","12","size-md","3"],["lines","none",1,"ion-padding-start"],["interface","popover","placeholder","Order",3,"ngModel","ngModelChange","ionChange"],["value","desc"],["value","asc"],[1,"aligned"],[4,"ngIf"],["class","list",4,"ngIf"],["type","indeterminate"],[1,"list"],["class","inscription-item main-content",3,"routerLink",4,"ngFor","ngForOf"],[3,"ionInfinite"],[1,"inscription-item","main-content",3,"routerLink"],[1,"content"],[3,"mime","contentPath","isExplicit"],[1,"name"],[1,"detail"],[1,"detail-item"]],template:function(t,i){1&t&&(n.TgZ(0,"ion-content",0)(1,"ion-grid")(2,"ion-row")(3,"ion-col",1)(4,"ion-header",2)(5,"ion-toolbar")(6,"ion-buttons",3),n._UZ(7,"ion-menu-button"),n.qZA(),n.TgZ(8,"ion-title"),n._uU(9," Inscriptions "),n.qZA()()()()(),n.TgZ(10,"ion-row")(11,"ion-col",1)(12,"ion-grid")(13,"ion-row")(14,"ion-col")(15,"ion-item",4)(16,"ion-searchbar",5),n.NdJ("ionInput",function(a){return i.onChangeSearch(a.target.value)}),n.qZA()()(),n.TgZ(17,"ion-col",6)(18,"ion-item",7)(19,"ion-select",8),n.NdJ("ngModelChange",function(a){return i.order=a})("ionChange",function(){return i.onChangeOrder()}),n.TgZ(20,"ion-select-option",9),n._uU(21,"Latest"),n.qZA(),n.TgZ(22,"ion-select-option",10),n._uU(23,"Oldest"),n.qZA()()()()()()()(),n.TgZ(24,"ion-row")(25,"ion-col",1)(26,"div",11),n.YNc(27,Z,2,0,"div",12)(28,T,4,1,"div",13)(29,L,2,0,"div",13),n.qZA()()()()()),2&t&&(n.xp6(16),n.Q6J("debounce",500),n.xp6(3),n.Q6J("ngModel",i.order),n.xp6(8),n.Q6J("ngIf",i.isLoading),n.xp6(1),n.Q6J("ngIf",!i.isLoading&&i.inscriptions.length>0),n.xp6(1),n.Q6J("ngIf",!i.isLoading&&0==i.inscriptions.length))},dependencies:[e.Pc,e.Sm,e.wI,e.W2,e.jY,e.Gu,e.ju,e.MB,e.Ie,e.fG,e.X7,e.Nd,e.VI,e.t9,e.n0,e.wd,e.sr,e.QI,e.j9,e.Fo,l.ez,l.sg,l.O5,l.JJ,p.u5,p.JJ,p.On,m.R,v.o,u.rH,I.kb,P.g],styles:[".list[_ngcontent-%COMP%]{text-align:left}@media only screen and (max-width: 900px){.list[_ngcontent-%COMP%]{text-align:center}}.filter[_ngcontent-%COMP%]{margin-top:-15px;color:#888}.name[_ngcontent-%COMP%]{width:100%;height:20px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.detail-item[_ngcontent-%COMP%]{width:100%;height:16px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap}"]})}}]);