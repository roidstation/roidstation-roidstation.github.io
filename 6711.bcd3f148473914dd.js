"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6711],{46711:(U,I,D)=>{D.d(I,{U5:()=>y,ro:()=>C});var p=D(19212),k=D(60095),g=D(34413),A=D(97582);class O{constructor(l){this.accessor=l,this.maskito=g.A_;const h=l.writeValue.bind(l);l.writeValue=m=>{var E;h((0,g.CV)(String(null!=m?m:""),null!==(E=this.maskito)&&void 0!==E?E:g.A_))}}}O.\u0275fac=function(l){return new(l||O)(p.Y36(k.Fj))},O.\u0275dir=p.lG2({type:O,selectors:[["input","maskito",""],["textarea","maskito",""]],hostBindings:function(l,h){1&l&&p.NdJ("input",function(E){return h.accessor._handleInput(E.target.value)})("blur",function(){return h.accessor.onTouched()})("compositionstart",function(){return h.accessor._compositionStart()})("compositionend",function(E){return h.accessor._compositionEnd(E.target.value)})},inputs:{maskito:"maskito"},features:[p._Bn([k.Fj,{provide:k.JU,multi:!0,useExisting:k.Fj}])]});class C{constructor(l,h){this.ngZone=l,this.elementRef=h,this.maskedElement=null,this.maskito=g.A_,this.maskitoElement=g.gI}ngOnChanges(){var l;return(0,A.mG)(this,void 0,void 0,function*(){null===(l=this.maskedElement)||void 0===l||l.destroy();const h=this.maskitoElement,m=yield h(this.elementRef.nativeElement);this.maskitoElement===h&&this.ngZone.runOutsideAngular(()=>{var E;this.maskedElement=new g.C8(m,null!==(E=this.maskito)&&void 0!==E?E:g.A_)})})}ngOnDestroy(){var l;null===(l=this.maskedElement)||void 0===l||l.destroy()}}C.\u0275fac=function(l){return new(l||C)(p.Y36(p.R0b),p.Y36(p.SBq))},C.\u0275dir=p.lG2({type:C,selectors:[["","maskito",""]],inputs:{maskito:"maskito",maskitoElement:"maskitoElement"},features:[p.TTD]});class v{transform(l,h){return(0,g.CV)(String(null!=l?l:""),null!=h?h:g.A_)}}v.\u0275fac=function(l){return new(l||v)},v.\u0275pipe=p.Yjl({name:"maskito",type:v,pure:!0});class y{}y.\u0275fac=function(l){return new(l||y)},y.\u0275mod=p.oAB({type:y}),y.\u0275inj=p.cJS({})},34413:(U,I,D)=>{D.d(I,{A_:()=>k,C8:()=>G,CV:()=>F,gI:()=>p});const p=i=>i.querySelector("input,textarea")||i,k={mask:/^.*$/,preprocessors:[],postprocessors:[],plugins:[],overwriteMode:"shift"};class g{constructor(){this.now=null,this.past=[],this.future=[]}undo(){const e=this.past.pop();e&&this.now&&(this.future.push(this.now),this.updateElement(e,"historyUndo"))}redo(){const e=this.future.pop();e&&this.now&&(this.past.push(this.now),this.updateElement(e,"historyRedo"))}updateHistory(e){if(!this.now)return void(this.now=e);const s=this.now.value!==e.value,t=this.now.selection.some((n,o)=>n!==e.selection[o]);!s&&!t||(s&&(this.past.push(this.now),this.future=[]),this.now=e)}updateElement(e,s){this.now=e,this.updateElementState(e,{inputType:s,data:null})}}function v(i){return"string"==typeof i}function y(i,e,s,t){let n="";for(let o=e.length;o<i.length;o++){const r=i[o],c=(null==t?void 0:t.value[o])===r;if(!v(r)||r===s&&!c)return n;n+=r}return n}function M(i,e){return Array.isArray(e)?i.length===e.length&&Array.from(i).every((s,t)=>{const n=e[t];return v(n)?s===n:s.match(n)}):e.test(i)}function m(i,e,s=null){if(M(i.value,e))return i;const{value:t,selection:n}=Array.isArray(e)?function l(i,e,s){let t=null,n=null;const o=Array.from(i.value).reduce((c,a,d)=>{const _=c+y(e,c,a,s),f=e[_.length];return v(f)?_+f:a.match(f)?(null===t&&d>=i.selection[0]&&(t=_.length),null===n&&d>=i.selection[1]&&(n=_.length),_+a):_},""),r=y(e,o,"",s);return{value:M(o+r,e)?o+r:o,selection:[null!=t?t:o.length,null!=n?n:o.length]}}(i,e,s):function h({value:i,selection:e},s){const[t,n]=e;let o=t,r=n;return{value:Array.from(i).reduce((a,d,u)=>{const _=a+d;return t===u&&(o=a.length),n===u&&(r=a.length),_.match(s)?_:a},""),selection:[o,r]}}(i,e);return{selection:n,value:Array.isArray(e)?t.slice(0,e.length):t}}function E(i,e){if(!Array.isArray(e))return i;const[s,t]=i.selection,n=[],o=Array.from(i.value).reduce((r,c,a)=>{const d=e[a];return a===s&&n.push(r.length),a===t&&n.push(r.length),v(d)&&d===c?r:r+c},"");return n.length<2&&n.push(...new Array(2-n.length).fill(o.length)),{value:o,selection:[n[0],n[1]]}}class S{constructor(e,s){this.initialElementState=e,this.maskOptions=s,this.value="",this.selection=[0,0];const{value:t,selection:n}=m(e,this.getMaskExpression(e));this.value=t,this.selection=n}addCharacters([e,s],t){const{value:n}=this,o=this.getMaskExpression({value:n.slice(0,e)+t+n.slice(s),selection:[e+t.length,e+t.length]}),r={value:n,selection:[e,s]},c=E(r,o),[a,d]=function C({value:i,selection:e},s,t){const[n,o]=e;return{value:i,selection:"replace"===("function"==typeof t?t({value:i,selection:e}):t)?[n,n+s.length]:[n,o]}}(c,t,this.maskOptions.overwriteMode).selection,u=c.value.slice(0,a)+t,_=u.length,f=m({value:u+c.value.slice(d),selection:[_,_]},o,r);if(n.slice(0,a)===m({value:u,selection:[_,_]},o,r).value||function O(i,...e){return e.every(({value:s,selection:t})=>s===i.value&&t[0]===i.selection[0]&&t[1]===i.selection[1])}(this,f))throw new Error("Invalid mask value");this.value=f.value,this.selection=f.selection}deleteCharacters([e,s]){if(e===s||!s)return;const{value:t}=this,n=this.getMaskExpression({value:t.slice(0,e)+t.slice(s),selection:[e,e]}),o={value:t,selection:[e,s]},r=E(o,n),[c,a]=r.selection,u=m({value:r.value.slice(0,c)+r.value.slice(a),selection:[c,c]},n,o);this.value=u.value,this.selection=u.selection}getMaskExpression(e){const{mask:s}=this.maskOptions;return"function"==typeof s?s(e):s}}class K{constructor(e){this.element=e,this.listeners=[]}listen(e,s,t){const n=s;this.element.addEventListener(e,n,t),this.listeners.push(()=>this.element.removeEventListener(e,n))}destroy(){this.listeners.forEach(e=>e())}}function T(i,e,s){return i.ctrlKey===!!(1&e)&&i.altKey===!!(2&e)&&i.shiftKey===!!(4&e)&&i.metaKey===!!(8&e)&&i.keyCode===s}function H({value:i,selection:e},s){const[t,n]=e;if(t!==n)return[t,n];const o=s?i.slice(t).indexOf("\n")+1||i.length:i.slice(0,n).lastIndexOf("\n")+1;return[s?t:o,s?o:n]}function B({value:i,selection:e},s){const[t,n]=e;return t!==n?[t,n]:(s?[t,n+1]:[t-1,n]).map(r=>Math.min(Math.max(r,0),i.length))}const w=/\s+$/g,L=/^\s+/g,R=/\s/;function j({value:i,selection:e},s){const[t,n]=e;if(t!==n)return[t,n];if(s){const a=i.slice(t),[d]=a.match(L)||[""],u=a.replace(L,"").search(R);return[t,-1!==u?t+d.length+u:i.length]}const o=i.slice(0,n),[r]=o.match(w)||[""],c=o.replace(w,"").split("").reverse().findIndex(a=>a.match(R));return[-1!==c?n-r.length-c:0,n]}function P(i=[]){return(e,...s)=>i.reduce((t,n)=>Object.assign(Object.assign({},t),n(t,...s)),e)}function F(i,e){const s=Object.assign(Object.assign({},k),e),t=P(s.preprocessors),n=P(s.postprocessors),o="string"==typeof i?{value:i,selection:[0,0]}:i,{elementState:r}=t({elementState:o,data:""},"validation"),c=new S(r,s),{value:a,selection:d}=n(c,o);return"string"==typeof i?a:{value:a,selection:d}}class G extends g{constructor(e,s){super(),this.element=e,this.maskitoOptions=s,this.isTextArea="TEXTAREA"===this.element.nodeName,this.eventListener=new K(this.element),this.options=Object.assign(Object.assign({},k),this.maskitoOptions),this.preprocessor=P(this.options.preprocessors),this.postprocessor=P(this.options.postprocessors),this.teardowns=this.options.plugins.map(t=>t(this.element,this.options)),this.ensureValueFitsMask(),this.updateHistory(this.elementState),this.eventListener.listen("keydown",t=>function b(i){return T(i,1,89)||T(i,5,90)||T(i,12,90)}(t)?(t.preventDefault(),this.redo()):function x(i){return T(i,1,90)||T(i,8,90)}(t)?(t.preventDefault(),this.undo()):void 0),function W(i){return"onbeforeinput"in i}(e)?this.eventListener.listen("beforeinput",t=>{const n=t.inputType.includes("Forward");switch(this.updateHistory(this.elementState),t.inputType){case"historyUndo":return t.preventDefault(),this.undo();case"historyRedo":return t.preventDefault(),this.redo();case"deleteByCut":case"deleteContentBackward":case"deleteContentForward":return this.handleDelete({event:t,isForward:n,selection:B(this.elementState,n)});case"deleteWordForward":case"deleteWordBackward":return this.handleDelete({event:t,isForward:n,selection:j(this.elementState,n),force:!0});case"deleteSoftLineBackward":case"deleteSoftLineForward":case"deleteHardLineBackward":case"deleteHardLineForward":return this.handleDelete({event:t,isForward:n,selection:H(this.elementState,n),force:!0});case"insertCompositionText":return;case"insertLineBreak":return this.handleEnter(t);default:return this.handleInsert(t,t.data||"")}}):(this.eventListener.listen("keydown",t=>this.handleKeydown(t)),this.eventListener.listen("paste",t=>{var n;return this.handleInsert(t,(null===(n=t.clipboardData)||void 0===n?void 0:n.getData("text/plain"))||"")})),this.eventListener.listen("input",({inputType:t})=>{"insertCompositionText"!==t&&(this.ensureValueFitsMask(),this.updateHistory(this.elementState))}),this.eventListener.listen("compositionend",()=>{this.ensureValueFitsMask(),this.updateHistory(this.elementState)})}get elementState(){const{value:e,selectionStart:s,selectionEnd:t}=this.element;return{value:e,selection:[s||0,t||0]}}get maxLength(){const{maxLength:e}=this.element;return-1===e?1/0:e}destroy(){this.eventListener.destroy(),this.teardowns.forEach(e=>null==e?void 0:e())}updateElementState({value:e,selection:s},t={inputType:"insertText",data:null}){const n=this.elementState.value;this.updateValue(e),this.updateSelectionRange(s),n!==e&&this.dispatchInputEvent(t)}updateSelectionRange([e,s]){var t,n;(this.element.selectionStart!==e||this.element.selectionEnd!==s)&&(null===(n=(t=this.element).setSelectionRange)||void 0===n||n.call(t,e,s))}updateValue(e){this.element.value=e}ensureValueFitsMask(){this.updateElementState(F(this.elementState,this.options))}dispatchInputEvent(e={inputType:"insertText",data:null}){const s=typeof window<"u"?window:globalThis;null!=s&&s.InputEvent&&this.element.dispatchEvent(new InputEvent("input",Object.assign(Object.assign({},e),{bubbles:!0,cancelable:!1})))}handleKeydown(e){const s=e.key,t="Delete"===s;switch(s){case"Backspace":case"Delete":return this.handleDelete({event:e,isForward:t,selection:B(this.elementState,t)});case"Enter":return this.handleEnter(e)}(function V({key:i,ctrlKey:e,metaKey:s,altKey:t}){const n=e||s||t,o=/^.$/u.test(i);return!n&&"Backspace"!==i&&o})(e)&&this.handleInsert(e,s)}handleDelete({event:e,selection:s,isForward:t,force:n=!1}){const o={value:this.elementState.value,selection:s},[r,c]=o.selection,{elementState:a}=this.preprocessor({elementState:o,data:""},t?"deleteForward":"deleteBackward"),d=new S(a,this.options),[u,_]=a.selection;d.deleteCharacters([u,_]);const f=this.postprocessor(d,o);if(o.value.slice(0,r)+o.value.slice(c)===f.value&&!n)return;if(e.preventDefault(),function A(i,...e){return e.every(({value:s})=>s===i.value)}(o,a,d,f))return this.updateSelectionRange(t?[_,_]:[u,u]);const N=t?"deleteContentForward":"deleteContentBackward";this.updateElementState(f,{inputType:"inputType"in e?e.inputType:N,data:null}),this.updateHistory(f)}handleInsert(e,s){const t=this.elementState,{elementState:n,data:o=s}=this.preprocessor({data:s,elementState:t},"insert"),r=new S(n,this.options);try{r.addCharacters(n.selection,o)}catch{return e.preventDefault()}const[c,a]=n.selection,d=n.value.slice(0,c)+s+n.value.slice(a),u=this.postprocessor(r,t);if(u.value.length>this.maxLength)return e.preventDefault();d!==u.value&&(e.preventDefault(),this.updateElementState(u,{data:s,inputType:"inputType"in e?e.inputType:"insertText"}),this.updateHistory(u))}handleEnter(e){this.isTextArea&&this.handleInsert(e,"\n")}}}}]);